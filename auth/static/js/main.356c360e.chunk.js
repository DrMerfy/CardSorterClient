(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,r,a){},31:function(e,r,a){e.exports=a(46)},40:function(e,r,a){},46:function(e,r,a){"use strict";a.r(r);var n=a(0),t=a.n(n),o=a(15),s=a.n(o),i=a(29),u=a(8),c=a(11),l=(a(40),a(9)),d=a(10),m=a(18),p=a(17),E=a(19),g=(a(24),a(26)),h=a.n(g),w="IS_SENDING",y="SUCCESS",f="PRODUCTION",v="PRODUCTION"===f?"http://83.212.97.237:8090":"http://127.0.0.1:5000",S="CHANGE_USERNAME",N="CHANGE_PASSWORD",A="CLEAR_CREDENTIALS",O="CLEAR_USERNAME_ERROR",b="CLEAR_PASSWORD_ERROR",C="SEND_CREDENTIALS";function R(){return{type:O,payload:{},error:!1}}function P(){return{type:b,payload:{},error:!1}}function j(e,r,a){return{type:C,payload:{status:e,location:r},error:a}}function T(e,r){return function(a){a(j(w)),h()(v+"/user_endpoint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})}).then(function(e){return e.json().then(function(e){document.cookie="auth_token= ;expires = Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="auth_token="+e.auth_token+"; path=/",a(j(y,e.location,e.error))})})}}var U={addAPassword:"add a password",addAnEmail:"add an email",addAnUsername:"add an username",email:"email",emailAlreadyInUse:"this email is already in use",forgotYourPassword:"forgot your password?",hiAgain:"hi again!",hiThere:"hi there!",login:"log in",password:"password",register:"register",signUp:"sign up",username:"username",usernameAlreadyInUse:"this username is already in use",usernameNotFound:"username not found",wrongPassword:"wrong password"},_=new(function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"initialize",value:function(e){this.text=U}}]),e}()),k=function(e){var r=e.onUsernameChange,a=e.onPasswordChange,n=e.onForgot,o=e.onLogin,s=e.onRegister,i=e.username,u=e.password,c=e.usernameError,l=e.passwordError,d=e.onErrorShow,m=e.onFormKeyPress;return c&&d.usernameErrorShowing(),l&&d.passwordErrorShowing(),t.a.createElement("div",{className:"container"},t.a.createElement("p",null,_.text.hiAgain),t.a.createElement("form",{onKeyPress:function(e){return m(e,i,u)}},t.a.createElement("div",{className:"error-holder"},t.a.createElement("input",{type:"text",className:"username",onChange:r,placeholder:_.text.username}),c&&t.a.createElement("div",{className:"error-message"},t.a.createElement("p",null,c))),t.a.createElement("div",{className:"error-holder"},t.a.createElement("input",{type:"password",className:"password last",onChange:a,placeholder:_.text.password}),l&&t.a.createElement("div",{className:"error-message"},t.a.createElement("p",null,l))),t.a.createElement("button",{type:"button",className:"reset unavailable",onClick:n},_.text.forgotYourPassword),t.a.createElement("button",{type:"button",className:"action login",onClick:function(){return o(i,u)}},t.a.createElement("p",null,_.text.login))),t.a.createElement("button",{className:"register",onClick:s},_.text.register))},x=Object(c.b)(function(e){return{username:e.login.username,password:e.login.password,usernameError:e.login.usernameError,passwordError:e.login.passwordError}},function(e,r){return{onUsernameChange:function(r){var a=r.target.value;e(function(e){return{type:S,payload:{username:e},error:!1}}(a))},onPasswordChange:function(r){var a=r.target.value;e(function(e){return{type:N,payload:{password:e},error:!1}}(a))},onForgot:function(){},onLogin:function(r,a){e(R()),e(P()),e(T(r,a))},onRegister:function(){e({type:A,payload:{},error:!1}),r.history.push("./register")},onErrorShow:{usernameErrorShowing:function(){setTimeout(function(){return e(R())},5e3)},passwordErrorShowing:function(){setTimeout(function(){return e(P())},5e3)}},onFormKeyPress:function(r,a,n){"Enter"===r.key&&(e(R()),e(P()),e(T(a,n)))}}})(k),I=function(e){function r(){return Object(l.a)(this,r),Object(m.a)(this,Object(p.a)(r).apply(this,arguments))}return Object(E.a)(r,e),Object(d.a)(r,[{key:"render",value:function(){return t.a.createElement("main",{className:"App"},t.a.createElement("div",{id:"logo"},t.a.createElement("p",null,"CardSorter")),t.a.createElement(x,{history:this.props.history}))}}]),r}(n.Component),D="CHANGE_USERNAME",L="CHANGE_PASSWORD",M="CHANGE_EMAIL",F="CLEAR_CREDENTIALS",G="CLEAR_USERNAME_ERROR",W="CLEAR_PASSWORD_ERROR",Y="CLEAR_EMAIL_ERROR",J="SENDING_CREDENTIALS";function K(){return{type:G,payload:{},error:!1}}function H(){return{type:W,payload:{},error:!1}}function B(){return{type:Y,payload:{},error:!1}}function z(e,r,a){return{type:J,payload:{status:e,location:r},error:a}}function V(e,r,a){return function(n){n(z(w)),fetch(v+"/user_endpoint?register=true",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r,email:a})}).then(function(e){return e.json().then(function(e){document.cookie="auth_token= ;expires = Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="auth_token="+e.auth_token+"; path=/",n(z(y,e.location,e.error))})})}}var $=function(e){var r=e.onUsernameChange,a=e.onPasswordChange,n=e.onEmailChange,o=e.onSignUp,s=e.onBack,i=e.username,u=e.password,c=e.email,l=e.usernameError,d=e.passwordError,m=e.emailError,p=e.onErrorShow,E=e.onFormKeyPress;return l&&p.usernameErrorShowing(),d&&p.passwordErrorShowing(),m&&p.emailErrorShowing(),t.a.createElement("div",{className:"container"},t.a.createElement("p",null,_.text.hiThere),t.a.createElement("button",{className:"back",onClick:s}),t.a.createElement("form",{onKeyPress:function(e){return E(e,i,u,c)}},t.a.createElement("div",{className:"error-holder"},t.a.createElement("input",{type:"text",className:"username",onChange:r,placeholder:_.text.username}),l&&t.a.createElement("div",{className:"error-message"},t.a.createElement("p",null,l))),t.a.createElement("div",{className:"error-holder"},t.a.createElement("input",{type:"password",className:"password",onChange:a,placeholder:_.text.password}),d&&t.a.createElement("div",{className:"error-message"},t.a.createElement("p",null,d))),t.a.createElement("div",{className:"error-holder"},t.a.createElement("input",{type:"email",className:"email last",onChange:n,placeholder:_.text.email}),m&&t.a.createElement("div",{className:"error-message"},t.a.createElement("p",null,m))),t.a.createElement("button",{type:"button",className:"action signup",onClick:function(){return o(i,u,c)}},t.a.createElement("p",null,_.text.signUp))))},q=Object(c.b)(function(e){return{username:e.register.username,password:e.register.password,email:e.register.email,usernameError:e.register.usernameError,passwordError:e.register.passwordError,emailError:e.register.emailError}},function(e,r){return{onUsernameChange:function(r){var a=r.target.value;e(K()),e(function(e){return{type:D,payload:{username:e},error:!1}}(a))},onPasswordChange:function(r){var a=r.target.value;e(H()),e(function(e){return{type:L,payload:{password:e},error:!1}}(a))},onEmailChange:function(r){var a=r.target.value;e(B()),e(function(e){return{type:M,payload:{email:e},error:!1}}(a))},onSignUp:function(r,a,n){e(K()),e(H()),e(B()),e(V(r,a,n))},onBack:function(){e({type:F,payload:{},error:!1}),r.history.push("/")},onErrorShow:{usernameErrorShowing:function(){setTimeout(function(){return e(K())},5e3)},passwordErrorShowing:function(){setTimeout(function(){return e(H())},5e3)},emailErrorShowing:function(){setTimeout(function(){return e(B())},5e3)}},onFormKeyPress:function(r,a,n,t){"Enter"===r.key&&(e(K()),e(H()),e(B()),e(V(a,n,t)))}}})($),Q=function(e){function r(){return Object(l.a)(this,r),Object(m.a)(this,Object(p.a)(r).apply(this,arguments))}return Object(E.a)(r,e),Object(d.a)(r,[{key:"render",value:function(){return t.a.createElement("main",{className:"App"},t.a.createElement("span",{id:"logo"},t.a.createElement("p",null,"CardSorter")),t.a.createElement(q,{history:this.props.history}))}}]),r}(n.Component),X=a(7),Z=a(27),ee=a(28),re=a.n(ee);var ae=Object(X.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case S:return Object.assign({},e,{username:r.payload.username});case N:return Object.assign({},e,{password:r.payload.password});case A:return Object.assign({},e,{username:void 0,password:void 0});case O:return Object.assign({},e,{usernameError:void 0});case b:return Object.assign({},e,{passwordError:void 0});case C:var a=Object.assign({},e,{isSending:r.payload.status!==y});if(r.payload.status===y){if(r.payload.location)return window.location.replace(r.payload.location),a;"USERNAME NOT FOUND"===r.error.message?a.usernameError=_.text.usernameNotFound:"INVALID PASSWORD"===r.error.message?a.passwordError=_.text.wrongPassword:"EMPTY USERNAME"===r.error.message?a.usernameError=_.text.addAnUsername:"EMPTY PASSWORD"===r.error.message&&(a.passwordError=_.text.addAPassword)}return a;default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case D:return Object.assign({},e,{username:r.payload.username});case L:return Object.assign({},e,{password:r.payload.password});case M:return Object.assign({},e,{email:r.payload.email});case F:return Object.assign({},e,{username:void 0,password:void 0,email:void 0});case G:return Object.assign({},e,{usernameError:void 0});case W:return Object.assign({},e,{passwordError:void 0});case Y:return Object.assign({},e,{emailError:void 0});case J:var a=Object.assign({},e,{isSending:r.payload.status!==y});if(r.payload.status===y){if(r.payload.location)return window.location.replace(r.payload.location),a;"DUPLICATE USERNAME"===r.error.message?a.usernameError=_.text.usernameAlreadyInUse:"DUPLICATE EMAIL"===r.error.message?a.emailError=_.text.emailAlreadyInUse:"EMPTY USERNAME"===r.error.message?a.usernameError=_.text.addAnUsername:"EMPTY PASSWORD"===r.error.message?a.passwordError=_.text.addAPassword:"EMPTY EMAIL"===r.error.message&&(a.emailError=_.text.addAnEmail)}return a;default:return e}}}),ne={login:{username:void 0,password:void 0,isSending:void 0,usernameError:void 0,passwordError:void 0},register:{username:void 0,password:void 0,email:void 0,isSending:void 0,usernameError:void 0,passwordError:void 0,emailError:void 0}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=function(){var e=[Z.a];"PRODUCTION"!==f&&e.push(re.a);var r=Object(X.d)(ae,ne,X.a.apply(void 0,e));return _.initialize("en-us"),r.subscribe(function(){})(),r}();s.a.render(t.a.createElement(c.a,{store:te},t.a.createElement(i.a,{basename:"/auth"},t.a.createElement(u.a,{exact:!0,path:"/",component:I}),t.a.createElement(u.a,{path:"/register",component:Q}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.356c360e.chunk.js.map