(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,r,n){},31:function(e,r,n){e.exports=n(46)},40:function(e,r,n){},46:function(e,r,n){"use strict";n.r(r);var a=n(0),t=n.n(a),o=n(15),s=n.n(o),i=n(29),u=n(8),c=n(11),l=(n(40),n(9)),m=n(10),p=n(18),d=n(17),E=n(19),g=(n(24),n(26)),h=n.n(g),f="IS_SENDING",w="SUCCESS",y="http://83.212.97.237:8090",v="CHANGE_USERNAME",N="CHANGE_PASSWORD",b="CLEAR_CREDENTIALS",S="CLEAR_USERNAME_ERROR",O="CLEAR_PASSWORD_ERROR",C="SEND_CREDENTIALS";function A(){return{type:S,payload:{},error:!1}}function j(){return{type:O,payload:{},error:!1}}function R(e,r,n){return{type:C,payload:{status:e,location:r},error:n}}var _={email:"email",forgotYourPassword:"forgot your password?",hiAgain:"hi again!",hiThere:"hi there!",login:"log in",password:"password",register:"register",signUp:"sign up",username:"username"},k=new(function(){function e(){Object(l.a)(this,e)}return Object(m.a)(e,[{key:"initialize",value:function(e){this.text=_}}]),e}()),T=function(e){var r=e.onUsernameChange,n=e.onPasswordChange,a=e.onForgot,o=e.onLogin,s=e.onRegister,i=e.username,u=e.password,c=e.usernameError,l=e.passwordError,m=e.onErrorShow;return c&&m.usernameErrorShowing(),l&&m.passwordErrorShowing(),t.a.createElement("div",{className:"container"},t.a.createElement("p",null,k.text.hiAgain),t.a.createElement("form",null,t.a.createElement("div",{className:"error-holder"},t.a.createElement("input",{type:"text",className:"username",onChange:r,placeholder:k.text.username}),c&&t.a.createElement("div",{className:"error-message"},t.a.createElement("p",null,c))),t.a.createElement("div",{className:"error-holder"},t.a.createElement("input",{type:"password",className:"password last",onChange:n,placeholder:k.text.password}),l&&t.a.createElement("div",{className:"error-message"},t.a.createElement("p",null,l))),t.a.createElement("button",{type:"button",className:"reset",onClick:a},k.text.forgotYourPassword),t.a.createElement("button",{type:"button",className:"action login",onClick:function(){return o(i,u)}},k.text.login)),t.a.createElement("button",{className:"register",onClick:s},k.text.register))},L=Object(c.b)(function(e){return{username:e.login.username,password:e.login.password,usernameError:e.login.usernameError,passwordError:e.login.passwordError}},function(e,r){return{onUsernameChange:function(r){var n=r.target.value;e(function(e){return{type:v,payload:{username:e},error:!1}}(n))},onPasswordChange:function(r){var n=r.target.value;e(function(e){return{type:N,payload:{password:e},error:!1}}(n))},onForgot:function(){},onLogin:function(r,n){e(A()),e(j()),e(function(e,r){return function(n){n(R(f)),h()(y+"/user_endpoint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})}).then(function(e){return e.json().then(function(e){document.cookie="auth_token= ;expires = Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="auth_token="+e.auth_token+"; path=/",n(R(w,e.location,e.error))})})}}(r,n))},onRegister:function(){e({type:b,payload:{},error:!1}),r.history.push("./register")},onErrorShow:{usernameErrorShowing:function(){setTimeout(function(){return e(A())},5e3)},passwordErrorShowing:function(){setTimeout(function(){return e(j())},5e3)}}}})(T),U=function(e){function r(){return Object(l.a)(this,r),Object(p.a)(this,Object(d.a)(r).apply(this,arguments))}return Object(E.a)(r,e),Object(m.a)(r,[{key:"render",value:function(){return t.a.createElement("main",{className:"App"},t.a.createElement(L,{history:this.props.history}))}}]),r}(a.Component),D="CHANGE_USERNAME",I="CHANGE_PASSWORD",x="CHANGE_EMAIL",P="CLEAR_CREDENTIALS",M="CLEAR_USERNAME_ERROR",G="CLEAR_EMAIL_ERROR",J="SENDING_CREDENTIALS";function W(){return{type:M,payload:{},error:!1}}function H(){return{type:G,payload:{},error:!1}}function B(e,r,n){return{type:J,payload:{status:e,location:r},error:n}}var F=function(e){var r=e.onUsernameChange,n=e.onPasswordChange,a=e.onEmailChange,o=e.onSignUp,s=e.onBack,i=e.username,u=e.password,c=e.email,l=e.usernameError,m=e.emailError,p=e.onErrorShow;return l&&p.usernameErrorShowing(),m&&p.emailErrorShowing(),t.a.createElement("div",{className:"container"},t.a.createElement("p",null,k.text.hiThere),t.a.createElement("button",{className:"back",onClick:s}),t.a.createElement("form",null,t.a.createElement("div",{className:"error-holder"},t.a.createElement("input",{type:"text",className:"username",onChange:r,placeholder:k.text.username}),l&&t.a.createElement("div",{className:"error-message"},t.a.createElement("p",null,l))),t.a.createElement("input",{type:"password",className:"password",onChange:n,placeholder:k.text.password}),t.a.createElement("div",{className:"error-holder"},t.a.createElement("input",{type:"email",className:"email last",onChange:a,placeholder:k.text.email}),m&&t.a.createElement("div",{className:"error-message"},t.a.createElement("p",null,m))),t.a.createElement("button",{type:"button",className:"action signup",onClick:function(){return o(i,u,c)}},k.text.signUp)))},z=Object(c.b)(function(e){return{username:e.register.username,password:e.register.password,email:e.register.email,usernameError:e.register.usernameError,emailError:e.register.emailError}},function(e,r){return{onUsernameChange:function(r){var n=r.target.value;e(function(e){return{type:D,payload:{username:e},error:!1}}(n))},onPasswordChange:function(r){var n=r.target.value;e(function(e){return{type:I,payload:{password:e},error:!1}}(n))},onEmailChange:function(r){var n=r.target.value;e(function(e){return{type:x,payload:{email:e},error:!1}}(n))},onSignUp:function(r,n,a){e(W()),e(H()),e(function(e,r,n){return function(a){a(B(f)),fetch(y+"/user_endpoint?register=true",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r,email:n})}).then(function(e){return e.json().then(function(e){document.cookie="auth_token= ;expires = Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="auth_token="+e.auth_token+"; path=/",a(B(w,e.location,e.error))})})}}(r,n,a))},onBack:function(){e({type:P,payload:{},error:!1}),r.history.push("/")},onErrorShow:{usernameErrorShowing:function(){setTimeout(function(){return e(W())},5e3)},emailErrorShowing:function(){setTimeout(function(){return e(H())},5e3)}}}})(F),V=function(e){function r(){return Object(l.a)(this,r),Object(p.a)(this,Object(d.a)(r).apply(this,arguments))}return Object(E.a)(r,e),Object(m.a)(r,[{key:"render",value:function(){return t.a.createElement("main",{className:"App"},t.a.createElement(z,{history:this.props.history}))}}]),r}(a.Component),Y=n(7),$=n(27),q=n(28),K=n.n(q);var Q=Object(Y.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case v:return Object.assign({},e,{username:r.payload.username});case N:return Object.assign({},e,{password:r.payload.password});case b:return Object.assign({},e,{username:void 0,password:void 0});case S:return Object.assign({},e,{usernameError:void 0});case O:return Object.assign({},e,{passwordError:void 0});case C:var n=Object.assign({},e,{isSending:r.payload.status!==w});if(r.payload.status===w){if(r.payload.location)return window.location.replace(r.payload.location),n;"USERNAME NOT FOUND"===r.error.message?n.usernameError="NOT FOUND":"INVALID PASSWORD"===r.error.message&&(n.passwordError="INVALID")}return n;default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case D:return Object.assign({},e,{username:r.payload.username});case I:return Object.assign({},e,{password:r.payload.password});case x:return Object.assign({},e,{email:r.payload.email});case P:return Object.assign({},e,{username:void 0,password:void 0,email:void 0});case M:return Object.assign({},e,{usernameError:void 0});case G:return Object.assign({},e,{emailError:void 0});case J:var n=Object.assign({},e,{isSending:r.payload.status!==w});if(r.payload.status===w){if(r.payload.location)return window.location.replace(r.payload.location),n;"DUPLICATE USERNAME"===r.error.message?n.usernameError="DUPLICATE":"DUPLICATE EMAIL"===r.error.message&&(n.emailError="DUPLICATE")}return n;default:return e}}}),X={login:{username:void 0,password:void 0,isSending:void 0,usernameError:void 0,passwordError:void 0},register:{username:void 0,password:void 0,email:void 0,isSending:void 0,usernameError:void 0,emailError:void 0}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=function(){var e=Object(Y.d)(Q,X,Object(Y.a)($.a,K.a));return k.initialize("en-us"),e.subscribe(function(){})(),e}();s.a.render(t.a.createElement(c.a,{store:Z},t.a.createElement(i.a,{basename:"/auth"},t.a.createElement(u.a,{exact:!0,path:"/",component:U}),t.a.createElement(u.a,{path:"/register",component:V}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.a70b47fb.chunk.js.map