(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,r,n){},30:function(e,r,n){e.exports=n(45)},39:function(e,r,n){},45:function(e,r,n){"use strict";n.r(r);var t=n(0),a=n.n(t),o=n(14),s=n.n(o),i=n(28),u=n(8),c=n(11),l=(n(39),n(9)),m=n(10),p=n(17),d=n(16),E=n(18),g=(n(24),n(26)),h=n.n(g),f="IS_SENDING",y="SUCCESS",w="http://83.212.97.237:8090",v="CHANGE_USERNAME",N="CHANGE_PASSWORD",b="CLEAR_CREDENTIALS",S="CLEAR_USERNAME_ERROR",O="CLEAR_PASSWORD_ERROR",C="SEND_CREDENTIALS";function A(){return{type:S,payload:{},error:!1}}function j(){return{type:O,payload:{},error:!1}}function R(e,r,n){return{type:C,payload:{status:e,location:r},error:n}}function k(e,r){return function(n){n(R(f)),h()(w+"/user_endpoint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})}).then(function(e){return e.json().then(function(e){document.cookie="auth_token= ;expires = Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="auth_token="+e.auth_token+"; path=/",n(R(y,e.location,e.error))})})}}var _={email:"email",forgotYourPassword:"forgot your password?",hiAgain:"hi again!",hiThere:"hi there!",login:"log in",password:"password",register:"register",signUp:"sign up",username:"username"},T=new(function(){function e(){Object(l.a)(this,e)}return Object(m.a)(e,[{key:"initialize",value:function(e){this.text=_}}]),e}()),P=function(e){var r=e.onUsernameChange,n=e.onPasswordChange,t=e.onForgot,o=e.onLogin,s=e.onRegister,i=e.username,u=e.password,c=e.usernameError,l=e.passwordError,m=e.onErrorShow,p=e.onFormKeyPress;return c&&m.usernameErrorShowing(),l&&m.passwordErrorShowing(),a.a.createElement("div",{className:"container"},a.a.createElement("p",null,T.text.hiAgain),a.a.createElement("form",{onKeyPress:function(e){return p(e,i,u)}},a.a.createElement("div",{className:"error-holder"},a.a.createElement("input",{type:"text",className:"username",onChange:r,placeholder:T.text.username}),c&&a.a.createElement("div",{className:"error-message"},a.a.createElement("p",null,c))),a.a.createElement("div",{className:"error-holder"},a.a.createElement("input",{type:"password",className:"password last",onChange:n,placeholder:T.text.password}),l&&a.a.createElement("div",{className:"error-message"},a.a.createElement("p",null,l))),a.a.createElement("button",{type:"button",className:"reset",onClick:t},T.text.forgotYourPassword),a.a.createElement("button",{type:"button",className:"action login",onClick:function(){return o(i,u)}},T.text.login)),a.a.createElement("button",{className:"register",onClick:s},T.text.register))},L=Object(c.b)(function(e){return{username:e.login.username,password:e.login.password,usernameError:e.login.usernameError,passwordError:e.login.passwordError}},function(e,r){return{onUsernameChange:function(r){var n=r.target.value;e(function(e){return{type:v,payload:{username:e},error:!1}}(n))},onPasswordChange:function(r){var n=r.target.value;e(function(e){return{type:N,payload:{password:e},error:!1}}(n))},onForgot:function(){},onLogin:function(r,n){e(A()),e(j()),e(k(r,n))},onRegister:function(){e({type:b,payload:{},error:!1}),r.history.push("./register")},onErrorShow:{usernameErrorShowing:function(){setTimeout(function(){return e(A())},5e3)},passwordErrorShowing:function(){setTimeout(function(){return e(j())},5e3)}},onFormKeyPress:function(r,n,t){"Enter"===r.key&&(e(A()),e(j()),e(k(n,t)))}}})(P),U=function(e){function r(){return Object(l.a)(this,r),Object(p.a)(this,Object(d.a)(r).apply(this,arguments))}return Object(E.a)(r,e),Object(m.a)(r,[{key:"render",value:function(){return a.a.createElement("main",{className:"App"},a.a.createElement(L,{history:this.props.history}))}}]),r}(t.Component),D="CHANGE_USERNAME",I="CHANGE_PASSWORD",x="CHANGE_EMAIL",M="CLEAR_CREDENTIALS",G="CLEAR_USERNAME_ERROR",F="CLEAR_EMAIL_ERROR",J="SENDING_CREDENTIALS";function K(){return{type:G,payload:{},error:!1}}function W(){return{type:F,payload:{},error:!1}}function H(e,r,n){return{type:J,payload:{status:e,location:r},error:n}}function B(e,r,n){return function(t){t(H(f)),fetch(w+"/user_endpoint?register=true",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r,email:n})}).then(function(e){return e.json().then(function(e){document.cookie="auth_token= ;expires = Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="auth_token="+e.auth_token+"; path=/",t(H(y,e.location,e.error))})})}}var z=function(e){var r=e.onUsernameChange,n=e.onPasswordChange,t=e.onEmailChange,o=e.onSignUp,s=e.onBack,i=e.username,u=e.password,c=e.email,l=e.usernameError,m=e.emailError,p=e.onErrorShow,d=e.onFormKeyPress;return l&&p.usernameErrorShowing(),m&&p.emailErrorShowing(),a.a.createElement("div",{className:"container"},a.a.createElement("p",null,T.text.hiThere),a.a.createElement("button",{className:"back",onClick:s}),a.a.createElement("form",{onKeyPress:function(e){return d(e,i,u,c)}},a.a.createElement("div",{className:"error-holder"},a.a.createElement("input",{type:"text",className:"username",onChange:r,placeholder:T.text.username}),l&&a.a.createElement("div",{className:"error-message"},a.a.createElement("p",null,l))),a.a.createElement("input",{type:"password",className:"password",onChange:n,placeholder:T.text.password}),a.a.createElement("div",{className:"error-holder"},a.a.createElement("input",{type:"email",className:"email last",onChange:t,placeholder:T.text.email}),m&&a.a.createElement("div",{className:"error-message"},a.a.createElement("p",null,m))),a.a.createElement("button",{type:"button",className:"action signup",onClick:function(){return o(i,u,c)}},T.text.signUp)))},V=Object(c.b)(function(e){return{username:e.register.username,password:e.register.password,email:e.register.email,usernameError:e.register.usernameError,emailError:e.register.emailError}},function(e,r){return{onUsernameChange:function(r){var n=r.target.value;e(function(e){return{type:D,payload:{username:e},error:!1}}(n))},onPasswordChange:function(r){var n=r.target.value;e(function(e){return{type:I,payload:{password:e},error:!1}}(n))},onEmailChange:function(r){var n=r.target.value;e(function(e){return{type:x,payload:{email:e},error:!1}}(n))},onSignUp:function(r,n,t){e(K()),e(W()),e(B(r,n,t))},onBack:function(){e({type:M,payload:{},error:!1}),r.history.push("/")},onErrorShow:{usernameErrorShowing:function(){setTimeout(function(){return e(K())},5e3)},emailErrorShowing:function(){setTimeout(function(){return e(W())},5e3)}},onFormKeyPress:function(r,n,t,a){"Enter"===r.key&&(e(K()),e(W()),e(B(n,t,a)))}}})(z),Y=function(e){function r(){return Object(l.a)(this,r),Object(p.a)(this,Object(d.a)(r).apply(this,arguments))}return Object(E.a)(r,e),Object(m.a)(r,[{key:"render",value:function(){return a.a.createElement("main",{className:"App"},a.a.createElement(V,{history:this.props.history}))}}]),r}(t.Component),$=n(7),q=n(27);var Q=Object($.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case v:return Object.assign({},e,{username:r.payload.username});case N:return Object.assign({},e,{password:r.payload.password});case b:return Object.assign({},e,{username:void 0,password:void 0});case S:return Object.assign({},e,{usernameError:void 0});case O:return Object.assign({},e,{passwordError:void 0});case C:var n=Object.assign({},e,{isSending:r.payload.status!==y});if(r.payload.status===y){if(r.payload.location)return window.location.replace(r.payload.location),n;"USERNAME NOT FOUND"===r.error.message?n.usernameError="NOT FOUND":"INVALID PASSWORD"===r.error.message&&(n.passwordError="INVALID")}return n;default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case D:return Object.assign({},e,{username:r.payload.username});case I:return Object.assign({},e,{password:r.payload.password});case x:return Object.assign({},e,{email:r.payload.email});case M:return Object.assign({},e,{username:void 0,password:void 0,email:void 0});case G:return Object.assign({},e,{usernameError:void 0});case F:return Object.assign({},e,{emailError:void 0});case J:var n=Object.assign({},e,{isSending:r.payload.status!==y});if(r.payload.status===y){if(r.payload.location)return window.location.replace(r.payload.location),n;"DUPLICATE USERNAME"===r.error.message?n.usernameError="DUPLICATE":"DUPLICATE EMAIL"===r.error.message&&(n.emailError="DUPLICATE")}return n;default:return e}}}),X={login:{username:void 0,password:void 0,isSending:void 0,usernameError:void 0,passwordError:void 0},register:{username:void 0,password:void 0,email:void 0,isSending:void 0,usernameError:void 0,emailError:void 0}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=function(){var e=Object($.d)(Q,X,Object($.a)(q.a));return T.initialize("en-us"),e.subscribe(function(){})(),e}();s.a.render(a.a.createElement(c.a,{store:Z},a.a.createElement(i.a,{basename:"/auth"},a.a.createElement(u.a,{exact:!0,path:"/",component:U}),a.a.createElement(u.a,{path:"/register",component:Y}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.ac2ca128.chunk.js.map