(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,n){e.exports=n.p+"static/media/thanks-icon.84d1d4ad.svg"},212:function(e,t,n){e.exports=n.p+"static/media/not-found.8c3d2a79.svg"},215:function(e,t,n){e.exports=n(554)},224:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(136),i=n.n(o),c=n(13),l=(n(224),n(35)),s=n(206),u=n(207),d=n.n(u),p="PRODUCTION",m=n(139),g=n(208),f=n.n(g),y="IS_FETCHING",h="IS_SENDING",v="SUCCESS",E="CREATE_CATEGORY",C="REMOVE_CATEGORY",D="RENAME_CATEGORY",O="NORMALIZE_CATEGORIES";var b="PRODUCTION"===p?"http://83.212.97.237:8090":"http://127.0.0.1:5000",T="SHOW_DESCRIPTION",k="HIDE_ALL_DESCRIPTIONS",I="SHOW_TITLE_BOX",w="HIDE_ALL_BOXES",S="SAVE_STUDY_ID",N="SENDING_SORT",j="SAVE_THANKS_MESSAGE",R="RENDER_THANKS_MESSAGE",_="TOOGLE_ON_BOARDING",A="TOGGLE_POPUP",x="POPUP_CHANGE_CONTENT",P="START_SORT",G="END_SORT";function F(e){return{type:_,payload:{showOnBoarding:e},error:!1}}function M(){return{type:w,error:!1}}function B(e,t){return{type:A,payload:{flag:e,title:t},error:!1}}function L(e){return{type:x,payload:{content:e},error:!1}}function U(e,t,n){return{type:N,payload:{status:e},error:n}}function H(e,t,n,a,r,o){return function(i){var c=r-a;i({type:O,payload:{},error:!1}),i(U(h)),fetch(b+"/sort_endpoint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studyID:e,categories:n,container:t,time:c,comment:o})}).then(function(e){return e.json().then(function(e){var t;i(U(v)),i((t=e.message,{type:j,payload:{message:t},error:!1})),i({type:R,payload:{},error:!1})})})}}var V="ADD_CARD_CATEGORY",W="REMOVE_CARD_CATEGORY",Y="ADD_CARD_CONTAINER",z="REMOVE_CARD_CONTAINER",J="REQUEST_CARDS";function K(e,t,n){return{type:J,payload:{status:e,response:t,error:n}}}function X(e){return function(t){t(function(e){return{type:S,payload:{studyID:e},error:!1}}(e)),t(K(y)),f()(b+"/sort_endpoint?cards=true&study_id="+e).then(function(e){return e.json().then(function(n){if(404!==e.status){t(K(v,n));var a,r=!0,o=!1,i=void 0;try{for(var c,l=n.cards[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var s=c.value;t((a=s.id,{type:Y,payload:{cardID:a},error:!1}))}}catch(u){o=!0,i=u}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}t(F(!0))}else t(K(v,void 0,n.error))})},function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(t)}(e)})}}var q=n(36),Q=n(60),Z=function(){function e(t,n){Object(q.a)(this,e),this.id=t,this.title=n,this.cards=[]}return Object(Q.a)(e,[{key:"addCard",value:function(e){this.cards.push(e)}},{key:"removeCard",value:function(e){this.cards=this.cards.filter(function(t){return t!==e})}}]),e}(),$={addComment:"add a comment",cancel:"cancel",clickToRename:"click here to rename",dropToAdd:"drop to add",dropToCreateCategory:"drop to create a category",studyNotFound:"study not found",sumbit:"sumbit",youCanCloseThisTab:"you can close this tab"},ee=new(function(){function e(){Object(q.a)(this,e)}return Object(Q.a)(e,[{key:"initialize",value:function(e){this.text=$}}]),e}());var te=function e(t,n,a){Object(q.a)(this,e),this.id=t,this.title=n,this.description=a},ne={};var ae=Object(l.combineReducers)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:var n=t.payload.response;if(n){var a=!0,r=!1,o=void 0;try{for(var i,c=n.cards[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value;ne[l.id]=new te(l.id,l.name,l.description)}}catch(s){r=!0,o=s}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}}return Object.assign({},e,{status:t.payload.status,notFound:!!t.payload.error});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n=t.payload.categoryID||Date.now(),a=new Z(n,t.payload.title);a.addCard(t.payload.cardID);var r=Object.assign({},e);return r[n]=a,r;case C:var o=t.payload.categoryID,i=Object.assign({},e);return delete i[o],i;case D:var c=t.payload.categoryID,l=Object.assign({},e);return l[c].title=t.payload.title,l;case V:var s=t.payload.cardID,u=t.payload.categoryID,d=Object.assign({},e);return d[u].addCard(s),d;case W:var p=t.payload.cardID,m=t.payload.categoryID,g=Object.assign({},e);return g[m].removeCard(p),g;case O:var f=Object.assign({},e);for(var y in f)if({}.hasOwnProperty.call(f,y)){var h=f[y];h.title===ee.text.clickToRename&&(h.title="not set")}return f;default:return e}},container:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return[].concat(Object(m.a)(e),[t.payload.cardID]);case z:return Object(m.a)(e).filter(function(e){return e!==t.payload.cardID});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object.assign({},e,{showOnBoarding:t.payload.showOnBoarding});case T:return Object.assign({},e,{showingDescription:t.payload.cardID});case k:return Object.assign({},e,{showingDescription:void 0});case I:return Object.assign({},e,{changeTitle:t.payload.categoryID});case w:return Object.assign({},e,{changeTitle:void 0});case S:return Object.assign({},e,{studyID:t.payload.studyID});case N:return Object.assign({},e,{sendingSort:t.payload.status});case j:return Object.assign({},e,{thanksMessage:t.payload.message});case R:return Object.assign({},e,{renderThanks:!0});case A:var n=Object.assign({},e);return n.popup.show=t.payload.flag,n.popup.title=t.payload.title,n;case x:var a=Object.assign({},e);return a.popup.content=t.payload.content,a;case P:return Object.assign({},e,{timeStarted:Date.now()});case G:return Object.assign({},e,{timeEnded:Date.now()});default:return e}}}),re={cards:{notFound:void 0,status:void 0},container:[],categories:{},ui:{showOnBoarding:void 0,changeTitle:void 0,showingDescription:void 0,studyID:void 0,sendingSort:void 0,renderThanks:void 0,thanksMessage:void 0,cardsSorted:void 0,categoriesCreated:void 0,timeStarted:void 0,timeEnded:void 0,popup:{show:!1,title:"Add a comment",content:void 0}}};var oe=n(213),ie=n(209),ce=n(214),le=(n(225),n(37)),se=n(210),ue=n.n(se),de="card-drag";var pe=Object(le.DragSource)(de,{beginDrag:function(e){return{id:e.id,position:e.position}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(function(e){e.id;var t=e.title,n=e.description,a=e.minimized,o=(e.position,e.onClick),i=e.showDescription,c=e.connectDragSource,l=(e.isDragging,!a||i?"card":"card minimized");return c(r.a.createElement("li",{className:l},r.a.createElement("h4",null,t),(!a||i)&&r.a.createElement("p",null,n),a&&n&&!i&&r.a.createElement("div",{className:"desc-container"},r.a.createElement("button",{onClick:o,className:"desc-btn"},r.a.createElement("p",null,"?")))))}),me=function(e){var t=e.cards;return r.a.createElement("ul",{id:"list"},t.map(function(e){return r.a.createElement(pe,{key:e.id,id:e.id,title:e.title,description:e.description,position:-1})}))};function ge(e){var t=[],n=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;t.push(ne[c])}}catch(l){a=!0,r=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return{cards:t}}var fe=Object(c.b)(function(e){return ge(e.container)},function(e){return{}})(me),ye=n(96),he=n.n(ye);var ve=Object(le.DropTarget)(de,{drop:function(e,t){var n=t.getItem();e.onCardDrop(n.id,n.position,e.id)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t=e.id,n=e.title,a=e.cards,o=e.onClick,i=e.showTitleBox,c=(e.onCardDrop,e.onTitleClick),l=e.onTitleChange,s=e.onTitleFinish,u=e.descriptionID,d=e.connectDropTarget,p=e.isOver;return a=ge(a).cards,d(r.a.createElement("li",{className:p?"category max-height":"category"},i&&r.a.createElement("div",{className:"title-input"},r.a.createElement("input",{type:"text",defaultValue:n,onChange:function(e){return l(e,t)},onKeyPress:function(e){return s(e)},onClick:function(e){return e.stopPropagation()}}),r.a.createElement("button",{type:"button",onClick:function(){return s()}})),!i&&r.a.createElement("h3",{onClick:function(e){return c(e,t)}},n),p&&r.a.createElement("div",{className:"drop-to-add"},r.a.createElement("img",{src:he.a}),r.a.createElement("p",null,ee.text.dropToAdd)),r.a.createElement("ul",null,a.map(function(e){return r.a.createElement(pe,{key:e.id,id:e.id,title:e.title,description:e.description,minimized:!0,position:t,onClick:function(t){return o(t,e.id,e.description)},showDescription:e.id===u})}))))});var Ee=Object(le.DropTarget)(de,{drop:function(e,t){if(!t.didDrop()){var n=t.getItem();e.onDrop(n.id,n.position)}e.removeEmptyCategories(e.categories)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}})(function(e){var t=e.categories,n=e.onClick,a=e.onCardClick,o=e.onCategTitleClick,i=e.changeTitleID,c=e.onCardDrop,l=(e.onDrop,e.descriptionID),s=e.onCategTitleChange,u=e.onCategTitleFinish,d=(e.removeEmptyCategories,e.connectDropTarget),p=e.isOver;return t=t.map(function(e){return r.a.createElement(ve,{key:"k"+e.id,id:e.id,title:e.title,cards:e.cards,onClick:a,onTitleChange:s,onTitleClick:o,onCardDrop:c,onTitleFinish:u,showTitleBox:e.id===i,descriptionID:l})}),d(r.a.createElement("ul",{id:"board",onClick:n},t,p&&r.a.createElement("div",{className:"category drop-to-create"},r.a.createElement("img",{src:he.a}),r.a.createElement("p",null,ee.text.dropToCreateCategory))))});function Ce(e,t,n){-1===t?e(function(e){return{type:z,payload:{cardID:e},error:!1}}(n)):t>-1&&e(function(e,t){return{type:W,payload:{cardID:e,categoryID:t},error:!1}}(n,t))}var De=Object(c.b)(function(e){return{categories:Object.values(e.categories),descriptionID:e.ui.showingDescription,changeTitleID:e.ui.changeTitle}},function(e){return{onClick:function(){e({type:k,error:!1}),e(M())},onDrop:function(t,n){Ce(e,n,t),e(function(e,t,n){return{type:E,payload:{categoryID:e,title:t,cardID:n},error:!1}}(void 0,ee.text.clickToRename,t))},removeEmptyCategories:function(t){!function(e,t){for(var n in t)if(t[n].cards.length<1){e((a=t[n].id,{type:C,payload:{categoryID:a}}));break}var a}(e,t)},onCategTitleClick:function(t,n){t.stopPropagation(),e(function(e){return{type:I,payload:{categoryID:e},error:!1}}(n))},onCategTitleChange:function(t,n){var a=t.target.value;a=(a=a.replace(/\s\s+/g," ").trim()).length>0?a:ee.text.clickToRename,e(function(e,t){return{type:D,payload:{categoryID:e,title:t},error:!1}}(n,a))},onCategTitleFinish:function(t){t?(t.stopPropagation(),13===t.charCode&&e(M())):e(M())},onCardClick:function(t,n,a){t.stopPropagation(),a&&a.length>0&&e(function(e){return{type:T,payload:{cardID:e},error:!1}}(n))},onCardDrop:function(t,n,a){Ce(e,n,t),e(function(e,t){return{type:V,payload:{cardID:e,categoryID:t},error:!1}}(t,a))}}})(Ee),Oe=function(e){var t=e.studyID,n=e.container,a=e.categories,o=e.timeStarted,i=e.onFinishClick,c=e.onCommentClick,l=e.comment;return r.a.createElement("header",null,r.a.createElement("h1",{id:"logo"},"Card Sorter"),r.a.createElement("button",{className:"btn--secondary",onClick:c},r.a.createElement("p",null,"Add a comment")),r.a.createElement("button",{className:"btn--main",onClick:function(){return i(t,n,a,o,l)}},r.a.createElement("p",null,"Finish")))},be=Object(c.b)(function(e){return{studyID:e.ui.studyID,timeStarted:e.ui.timeStarted,container:e.container,categories:e.categories,comment:e.ui.popup.content}},function(e){return{onFinishClick:function(t,n,a,r,o){e({type:G,payload:{},error:!1}),e(H(t,n,a,r,Date.now(),o))},onCommentClick:function(){e(B(!0,ee.text.addComment))}}})(Oe),Te=function(e){var t=e.message,n=e.image,a=e.submessage;return r.a.createElement("div",{className:"message-screen"},r.a.createElement("h1",{id:"logo"},r.a.createElement("a",{href:"/"},"Card Sorter")),r.a.createElement("img",{src:n,alt:"Sending love!"}),r.a.createElement("h2",null,t),r.a.createElement("h3",null,a))},ke=function(e){var t=e.show,n=e.onClick;return t?r.a.createElement("div",{className:"on-boarding-screen",onClick:function(e){return n(e)}},r.a.createElement("div",{className:"list-explainer"},r.a.createElement("span",null,r.a.createElement("h3",null,"Step 1"),r.a.createElement("p",null,"Take a quick look at the list of items to the left."),r.a.createElement("p",null,"We'd like you to sort them into groups that make sense to you."),r.a.createElement("p",null,"There is no right or wrong answer. Just do what comes naturally."),r.a.createElement("h3",null,"Step 2"),r.a.createElement("p",null,"Drag an item from the left into this area to create your first group."))),r.a.createElement("div",{className:"finish-explainer"},r.a.createElement("span",null,r.a.createElement("h3",null,"Step 3"),r.a.createElement("p",null,"When you feel like you are done, press the finish button.")))):r.a.createElement("span",null)},Ie=Object(c.b)(function(e){return{show:e.ui.showOnBoarding}},function(e){return{onClick:function(t){t.stopPropagation(),e(F(!1)),e({type:P,payload:{},error:!1})}}})(ke),we=function(e){var t=e.title,n=e.content,o=e.onSumbit,i=e.onCancel,c=Object(a.useRef)(null);return r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup"},r.a.createElement("h1",null,t),r.a.createElement("form",null,r.a.createElement("textarea",{defaultValue:n,ref:c}),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{type:"button",className:"btn--secondary cancel",onClick:function(){return i(n)}},r.a.createElement("p",null,ee.text.cancel)),r.a.createElement("button",{type:"button",className:"btn--main sumbit",onClick:function(){return o(c)}},r.a.createElement("p",null,ee.text.sumbit))))))},Se=Object(c.b)(function(e){return{title:e.ui.popup.title,content:e.ui.popup.content,prevContent:e.ui.popup.prevContent}},function(e){return{onSumbit:function(t){var n=t.current.value;e(L(n)),e(B(!1))},onCancel:function(t){e(L(t)),e(B(!1))}}})(we),Ne=n(211),je=n.n(Ne),Re=n(212),_e=n.n(Re),Ae=(n(553),function(e){function t(){return Object(q.a)(this,t),Object(oe.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(Q.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.studyNotFound,a=t.renderThanks,o=t.thanksMessage,i=t.showPopup;return e=a?r.a.createElement("main",null,r.a.createElement(Te,{message:o,image:je.a,submessage:"("+ee.text.youCanCloseThisTab+")"})):n?r.a.createElement("main",null,r.a.createElement(Te,{message:ee.text.studyNotFound,image:_e.a})):r.a.createElement(le.DragDropContextProvider,{backend:ue.a},i&&r.a.createElement(Se,null),r.a.createElement(Ie,null),r.a.createElement("div",{className:"App"},r.a.createElement(be,null),r.a.createElement("div",{id:"main-panel"},r.a.createElement(fe,null),r.a.createElement(De,null)))),e}}]),t}(a.Component)),xe=Object(c.b)(function(e){return{studyNotFound:e.cards.notFound,renderThanks:e.ui.renderThanks,thanksMessage:e.ui.thanksMessage,showPopup:e.ui.popup.show}})(Ae);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pe=function(){var e=[s.a];"PRODUCTION"!==p&&e.push(d.a);var t=Object(l.createStore)(ae,re,l.applyMiddleware.apply(void 0,e)),n=t.subscribe(function(){});ee.initialize("en-us");var a=new URL(window.location.href).searchParams.get("id");return t.dispatch(X(a)),n(),t}();i.a.render(r.a.createElement(c.a,{store:Pe},r.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,n){e.exports=n.p+"static/media/plus.ed718a5f.svg"}},[[215,1,2]]]);
//# sourceMappingURL=main.7f5bfa6a.chunk.js.map