(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,n){e.exports=n.p+"static/media/thanks-icon.84d1d4ad.svg"},212:function(e,t,n){e.exports=n.p+"static/media/not-found.8c3d2a79.svg"},215:function(e,t,n){e.exports=n(554)},224:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(137),i=n.n(o),c=n(12),l=(n(224),n(35)),s=n(206),u=n(207),d=n.n(u),p="PRODUCTION",m=n(71),f=n(208),g=n.n(f),y="IS_FETCHING",h="IS_SENDING",v="SUCCESS",E="CREATE_CATEGORY",b="REMOVE_CATEGORY",O="RENAME_CATEGORY",D="MINIMIZE_CATEGORY",C="NORMALIZE_CATEGORIES";var T="PRODUCTION"===p?"http://83.212.97.237:8090":"http://127.0.0.1:5000",k="SHOW_TITLE_BOX",w="HIDE_ALL_BOXES",I="SAVE_STUDY_ID",N="SENDING_SORT",S="SAVE_THANKS_MESSAGE",j="RENDER_THANKS_MESSAGE",R="TOOGLE_ON_BOARDING",_="TOGGLE_POPUP",A="POPUP_CHANGE_CONTENT",x="START_SORT",P="END_SORT";function M(e){return{type:R,payload:{showOnBoarding:e},error:!1}}function G(){return{type:w,error:!1}}function F(e,t){return{type:_,payload:{flag:e,title:t},error:!1}}function z(e){return{type:A,payload:{content:e},error:!1}}function B(e,t,n){return{type:N,payload:{status:e},error:n}}function U(e,t,n,a,r,o){return function(i){var c=r-a;i({type:C,payload:{},error:!1}),i(B(h)),fetch(T+"/sort_endpoint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studyID:e,categories:n,container:t,time:c,comment:o})}).then(function(e){return e.json().then(function(e){var t;i(B(v)),i((t=e.message,{type:S,payload:{message:t},error:!1})),i({type:j,payload:{},error:!1})})})}}var L="TOGGLE_DESCRIPTION",V="ADD_CARD_CATEGORY",Y="REMOVE_CARD_CATEGORY",H="ADD_CARD_CONTAINER",W="REMOVE_CARD_CONTAINER",J="REQUEST_CARDS";function K(e,t){return{type:Y,payload:{cardID:e,categoryID:t},error:!1}}function X(e){return{type:W,payload:{cardID:e},error:!1}}function Z(e,t,n){return{type:J,payload:{status:e,response:t,error:n}}}function q(e){return function(t){t(function(e){return{type:I,payload:{studyID:e},error:!1}}(e)),t(Z(y)),g()(T+"/sort_endpoint?cards=true&study_id="+e).then(function(e){return e.json().then(function(n){if(404!==e.status){t(Z(v,n));var a,r=!0,o=!1,i=void 0;try{for(var c,l=n.cards[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var s=c.value;t((a=s.id,{type:H,payload:{cardID:a},error:!1}))}}catch(u){o=!0,i=u}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}t(M(!0))}else t(Z(v,void 0,n.error))})},function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(t)}(e)})}}var Q=n(36),$=n(60),ee=function(){function e(t,n){Object(Q.a)(this,e),this.id=t,this.title=n,this.cards=[],this.isMinimized=!1}return Object($.a)(e,[{key:"addCard",value:function(e){this.cards.push(e)}},{key:"removeCard",value:function(e){this.cards=this.cards.filter(function(t){return t!==e})}}]),e}(),te={addComment:"add a comment",cancel:"cancel",clickToRename:"click here to rename",dropToAdd:"drop to add",dropToCreateCategory:"drop to create a category",studyNotFound:"study not found",sumbit:"sumbit",youCanCloseThisTab:"you can close this tab"},ne=new(function(){function e(){Object(Q.a)(this,e)}return Object($.a)(e,[{key:"initialize",value:function(e){this.text=te}}]),e}());var ae=function e(t,n,a){Object(Q.a)(this,e),this.id=t,this.title=n,this.description=a},re={};var oe=Object(l.combineReducers)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:var n=t.payload.response;if(n){var a=!0,r=!1,o=void 0;try{for(var i,c=n.cards[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value;re[l.id]=new ae(l.id,l.name,l.description)}}catch(u){r=!0,o=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}}return Object.assign({},e,{status:t.payload.status,notFound:!!t.payload.error});case L:var s=Object.assign({},e);return s.showingDescription=Object(m.a)(s.showingDescription),-1===s.showingDescription.indexOf(t.payload.cardID)?s.showingDescription.push(t.payload.cardID):s.showingDescription=s.showingDescription.filter(function(e){return e!==t.payload.cardID}),s;default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n=t.payload.categoryID||Date.now(),a=new ee(n);a.addCard(t.payload.cardID);var r=Object.assign({},e);return r[n]=a,r;case b:var o=t.payload.categoryID,i=Object.assign({},e);return delete i[o],i;case O:var c=t.payload.categoryID,l=Object.assign({},e);return l[c].title=t.payload.title,l;case V:var s=t.payload.cardID,u=t.payload.categoryID,d=Object.assign({},e);return d[u].addCard(s),d;case Y:var p=t.payload.cardID,m=t.payload.categoryID,f=Object.assign({},e);return f[m].removeCard(p),f;case D:var g=t.payload.id,y=Object.assign({},e);return y[g].isMinimized=t.payload.value,y;case C:var h=Object.assign({},e);for(var v in h)if({}.hasOwnProperty.call(h,v)){var T=h[v];T.title===ne.text.clickToRename&&(T.title="not set")}return h;default:return e}},container:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return[].concat(Object(m.a)(e),[t.payload.cardID]);case W:return Object(m.a)(e).filter(function(e){return e!==t.payload.cardID});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object.assign({},e,{showOnBoarding:t.payload.showOnBoarding});case k:return Object.assign({},e,{changeTitle:t.payload.categoryID});case w:return Object.assign({},e,{changeTitle:void 0});case I:return Object.assign({},e,{studyID:t.payload.studyID});case N:return Object.assign({},e,{sendingSort:t.payload.status});case S:return Object.assign({},e,{thanksMessage:t.payload.message});case j:return Object.assign({},e,{renderThanks:!0});case _:var n=Object.assign({},e);return n.popup.show=t.payload.flag,n.popup.title=t.payload.title,n;case A:var a=Object.assign({},e);return a.popup.content=t.payload.content,a;case x:return Object.assign({},e,{timeStarted:Date.now()});case P:return Object.assign({},e,{timeEnded:Date.now()});default:return e}}}),ie={cards:{notFound:void 0,status:void 0,showingDescription:[]},container:[],categories:{},ui:{showOnBoarding:void 0,changeTitle:void 0,showingDescription:void 0,studyID:void 0,sendingSort:void 0,renderThanks:void 0,thanksMessage:void 0,cardsSorted:void 0,categoriesCreated:void 0,timeStarted:void 0,timeEnded:void 0,popup:{show:!1,title:"Add a comment",content:void 0}}};var ce=n(213),le=n(209),se=n(214),ue=(n(225),n(37)),de=n(210),pe=n.n(de),me="card-drag";var fe=Object(ue.DragSource)(me,{beginDrag:function(e){return{id:e.id,position:e.position}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(function(e){e.id;var t=e.title,n=e.description,a=e.minimized,o=(e.position,e.onClick),i=e.showDescription,c=e.connectDragSource,l=(e.isDragging,a?"card minimized":"card");return c(r.a.createElement("li",{className:l},!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,t),r.a.createElement("p",null,n)),a&&r.a.createElement("div",{className:"titles"},r.a.createElement("h4",null,t),i&&r.a.createElement("p",null,n)),a&&n&&r.a.createElement("button",{onClick:o,className:"desc-btn"})))}),ge=function(e){var t=e.cards;return r.a.createElement("ul",{id:"list"},t.map(function(e){return r.a.createElement(fe,{key:e.id,id:e.id,title:e.title,description:e.description,position:-1})}))};function ye(e){var t=[],n=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;t.push(re[c])}}catch(l){a=!0,r=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return{cards:t}}var he=Object(c.b)(function(e){return ye(e.container)},function(e){return{}})(ge),ve=n(97),Ee=n.n(ve);function be(e,t){var n=!0,a=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){if(e===o.value)return!0}}catch(c){a=!0,r=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return!1}var Oe=Object(ue.DropTarget)(me,{drop:function(e,t){var n=t.getItem();e.onCardDrop(n.id,n.position,e.id)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t=e.id,n=e.title,a=e.cards,o=e.isMinimized,i=e.onMinimized,c=e.onCardClick,l=e.showTitleBox,s=(e.onCardDrop,e.onTitleClick),u=e.onTitleChange,d=e.onTitleFinish,p=e.descriptionIDs,m=e.connectDropTarget,f=e.isOver;a=ye(a).cards;var g="category";return f&&(g+=" max-height"),o&&(g+=" minimized"),m(r.a.createElement("li",{className:g},r.a.createElement("div",{className:"header"},l&&r.a.createElement("div",{className:"title-input"},r.a.createElement("input",{autoFocus:!0,type:"text",placeholder:n||ne.text.clickToRename,defaultValue:n,onChange:function(e){return u(e,t)},onKeyPress:function(e){return d(e)},onClick:function(e){return e.stopPropagation()}}),r.a.createElement("button",{type:"button",onClick:function(){return d()}})),!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{onClick:function(e){return s(e,t)}},n||ne.text.clickToRename),r.a.createElement("button",{className:"minimize",onClick:function(e){return i(e,o,t)}}))),f&&r.a.createElement("div",{className:"drop-to-add"},r.a.createElement("img",{src:Ee.a}),r.a.createElement("p",null,ne.text.dropToAdd)),r.a.createElement("ul",null,a.map(function(e){return r.a.createElement(fe,{key:e.id,id:e.id,title:e.title,description:e.description,minimized:!0,position:t,onClick:function(t){return c(t,e.id,e.description)},showDescription:be(e.id,p)})}))))});var De=Object(c.b)(function(e,t){return{id:t.id,title:t.title,cards:t.cards,isMinimized:e.categories[t.id].isMinimized,descriptionIDs:e.cards.showingDescription,showTitleBox:t.id===e.ui.changeTitle}},function(e){return{onTitleClick:function(t,n){t.stopPropagation(),e(function(e){return{type:k,payload:{categoryID:e},error:!1}}(n))},onTitleChange:function(t,n){var a=t.target.value;a=(a=a.replace(/\s\s+/g," ").trim()).length>0?a:ne.text.clickToRename,e(function(e,t){return{type:O,payload:{categoryID:e,title:t},error:!1}}(n,a))},onTitleFinish:function(t){t?(t.stopPropagation(),13===t.charCode&&e(G())):e(G())},onCardClick:function(t,n,a){t.stopPropagation(),a&&a.length>0&&e(function(e){return{type:L,payload:{cardID:e},error:!1}}(n))},onMinimized:function(t,n,a){t.stopPropagation(),e(function(e,t){return{type:D,payload:{id:e,value:t},error:!1}}(a,!n))},onCardDrop:function(t,n,a){!function(e,t,n){-1===t?e(X(n)):t>-1&&e(K(n,t))}(e,n,t),e(function(e,t){return{type:V,payload:{cardID:e,categoryID:t},error:!1}}(t,a))}}})(Oe);var Ce=Object(ue.DropTarget)(me,{drop:function(e,t){if(!t.didDrop()){var n=t.getItem();e.onDrop(n.id,n.position)}e.removeEmptyCategories(e.categories)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}})(function(e){var t=e.categories,n=e.onClick,a=(e.onDrop,e.connectDropTarget),o=e.isOver;e.removeEmptyCategories;return t=t.map(function(e){return r.a.createElement(De,{key:"k"+e.id,id:e.id,title:e.title,cards:e.cards})}),a(r.a.createElement("ul",{id:"board",onClick:n},t,o&&r.a.createElement("div",{className:"category drop-to-create"},r.a.createElement("img",{src:Ee.a}),r.a.createElement("p",null,ne.text.dropToCreateCategory))))});var Te=Object(c.b)(function(e){return{categories:Object.values(e.categories)}},function(e){return{onClick:function(){e(G())},onDrop:function(t,n){!function(e,t,n){-1===t?e(X(n)):t>-1&&e(K(n,t))}(e,n,t),e(function(e,t){return{type:E,payload:{categoryID:e,cardID:t},error:!1}}(void 0,t))},removeEmptyCategories:function(t){!function(e,t){for(var n in t)if(t[n].cards.length<1){e((a=t[n].id,{type:b,payload:{categoryID:a}}));break}var a}(e,t)}}})(Ce),ke=function(e){var t=e.studyID,n=e.container,a=e.categories,o=e.timeStarted,i=e.onFinishClick,c=e.onCommentClick,l=e.comment;return r.a.createElement("header",null,r.a.createElement("div",{className:"left-buttons"},r.a.createElement("button",{className:"undo"}),r.a.createElement("button",{className:"help"})),r.a.createElement("h1",{id:"logo"},"Card Sorter"),r.a.createElement("button",{className:"btn--secondary",onClick:c},r.a.createElement("p",null,"Add a comment")),r.a.createElement("button",{className:"btn--main",onClick:function(){return i(t,n,a,o,l)}},r.a.createElement("p",null,"Finish")))},we=Object(c.b)(function(e){return{studyID:e.ui.studyID,timeStarted:e.ui.timeStarted,container:e.container,categories:e.categories,comment:e.ui.popup.content}},function(e){return{onFinishClick:function(t,n,a,r,o){e({type:P,payload:{},error:!1}),e(U(t,n,a,r,Date.now(),o))},onCommentClick:function(){e(F(!0,ne.text.addComment))}}})(ke),Ie=function(e){var t=e.message,n=e.image,a=e.submessage;return r.a.createElement("div",{className:"message-screen"},r.a.createElement("h1",{id:"logo"},r.a.createElement("a",{href:"/"},"Card Sorter")),r.a.createElement("img",{src:n,alt:"Sending love!"}),r.a.createElement("h2",null,t),r.a.createElement("h3",null,a))},Ne=function(e){var t=e.show,n=e.onClick;return t?r.a.createElement("div",{className:"on-boarding-screen",onClick:function(e){return n(e)}},r.a.createElement("div",{className:"list-explainer"},r.a.createElement("span",null,r.a.createElement("h3",null,"Step 1"),r.a.createElement("p",null,"Take a quick look at the list of items to the left."),r.a.createElement("p",null,"We'd like you to sort them into groups that make sense to you."),r.a.createElement("p",null,"There is no right or wrong answer. Just do what comes naturally."),r.a.createElement("h3",null,"Step 2"),r.a.createElement("p",null,"Drag an item from the left into this area to create your first group."))),r.a.createElement("div",{className:"finish-explainer"},r.a.createElement("span",null,r.a.createElement("h3",null,"Step 3"),r.a.createElement("p",null,"When you feel like you are done, press the finish button.")))):r.a.createElement("span",null)},Se=Object(c.b)(function(e){return{show:e.ui.showOnBoarding}},function(e){return{onClick:function(t){t.stopPropagation(),e(M(!1)),e({type:x,payload:{},error:!1})}}})(Ne),je=function(e){var t=e.title,n=e.content,o=e.onSumbit,i=e.onCancel,c=Object(a.useRef)(null);return r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup"},r.a.createElement("h1",null,t),r.a.createElement("form",null,r.a.createElement("textarea",{defaultValue:n,ref:c}),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{type:"button",className:"btn--secondary cancel",onClick:function(){return i(n)}},r.a.createElement("p",null,ne.text.cancel)),r.a.createElement("button",{type:"button",className:"btn--main sumbit",onClick:function(){return o(c)}},r.a.createElement("p",null,ne.text.sumbit))))))},Re=Object(c.b)(function(e){return{title:e.ui.popup.title,content:e.ui.popup.content,prevContent:e.ui.popup.prevContent}},function(e){return{onSumbit:function(t){var n=t.current.value;e(z(n)),e(F(!1))},onCancel:function(t){e(z(t)),e(F(!1))}}})(je),_e=n(211),Ae=n.n(_e),xe=n(212),Pe=n.n(xe),Me=(n(553),function(e){function t(){return Object(Q.a)(this,t),Object(ce.a)(this,Object(le.a)(t).apply(this,arguments))}return Object(se.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.studyNotFound,a=t.renderThanks,o=t.thanksMessage,i=t.showPopup;return e=a?r.a.createElement("main",null,r.a.createElement(Ie,{message:o,image:Ae.a,submessage:"("+ne.text.youCanCloseThisTab+")"})):n?r.a.createElement("main",null,r.a.createElement(Ie,{message:ne.text.studyNotFound,image:Pe.a})):r.a.createElement(ue.DragDropContextProvider,{backend:pe.a},i&&r.a.createElement(Re,null),r.a.createElement(Se,null),r.a.createElement("div",{className:"App"},r.a.createElement(we,null),r.a.createElement("div",{id:"main-panel"},r.a.createElement(he,null),r.a.createElement(Te,null)))),e}}]),t}(a.Component)),Ge=Object(c.b)(function(e){return{studyNotFound:e.cards.notFound,renderThanks:e.ui.renderThanks,thanksMessage:e.ui.thanksMessage,showPopup:e.ui.popup.show}})(Me);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe=function(){var e=[s.a];"PRODUCTION"!==p&&e.push(d.a);var t=Object(l.createStore)(oe,ie,l.applyMiddleware.apply(void 0,e)),n=t.subscribe(function(){});ne.initialize("en-us");var a=new URL(window.location.href).searchParams.get("id");return t.dispatch(q(a)),n(),t}();i.a.render(r.a.createElement(c.a,{store:Fe},r.a.createElement(Ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e,t,n){e.exports=n.p+"static/media/plus.ed718a5f.svg"}},[[215,1,2]]]);
//# sourceMappingURL=main.b51151fe.chunk.js.map