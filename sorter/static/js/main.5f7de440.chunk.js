(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{212:function(e,t,n){e.exports=n(551)},221:function(e,t,n){},550:function(e,t,n){},551:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(135),i=n.n(o),c=n(36),u=(n(221),n(34)),l=n(205),s=n(206),d=n.n(s),p=n(138),g=n(207),f=n.n(g),y="IS_FETCHING",v="IS_SENDING",D="SUCCESS",h="http://83.212.97.237:8090",C="SHOW_DESCRIPTION",m="HIDE_ALL_DESCRIPTIONS",E="SHOW_TITLE_BOX",I="HIDE_ALL_BOXES",O="SAVE_STUDY_ID",b="SENDING_SORT";function T(){return{type:I,error:!1}}function k(e){return{type:b,payload:{status:e},error:!1}}var j="ADD_CARD_CATEGORY",w="REMOVE_CARD_CATEGORY",S="ADD_CARD_CONTAINER",_="REMOVE_CARD_CONTAINER",R="REQUEST_CARDS";function A(e,t,n){return{type:R,payload:{status:e,response:t,error:n}}}function N(e){return function(t){t(function(e){return{type:O,payload:{studyID:e},error:!1}}(e)),t(A(y)),f()(h+"/sort_endpoint?cards=true&study_id="+e).then(function(e){return e.json().then(function(e){t(A(D,e));var n,r=!0,a=!1,o=void 0;try{for(var i,c=e.cards[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;t((n=u.id,{type:S,payload:{cardID:n},error:!1}))}}catch(l){a=!0,o=l}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}})},function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(t)}(e)})}}var P="CREATE_CATEGORY",x="REMOVE_CATEGORY",F="RENAME_CATEGORY";var G=n(94),B=n(95),Y=function(){function e(t,n){Object(G.a)(this,e),this.id=t,this.title=n,this.cards=[]}return Object(B.a)(e,[{key:"addCard",value:function(e){this.cards.push(e)}},{key:"removeCard",value:function(e){this.cards=this.cards.filter(function(t){return t!==e})}}]),e}();var H=[];var L=Object(u.combineReducers)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:var n=t.payload.response;if(n){var r=!0,a=!1,o=void 0;try{for(var i,c=n.cards[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;H.push(u)}}catch(l){a=!0,o=l}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}return Object.assign({},e,{status:t.payload.status});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:var n=t.payload.categoryID||Date.now(),r=new Y(n,t.payload.title);r.addCard(t.payload.cardID);var a=Object.assign({},e);return a[n]=r,a;case x:var o=t.payload.categoryID,i=Object.assign({},e);return delete i[o],i;case F:var c=t.payload.categoryID,u=Object.assign({},e);return u[c].title=t.payload.title,u;case j:var l=t.payload.cardID,s=t.payload.categoryID,d=Object.assign({},e);return d[s].addCard(l),d;case w:var p=t.payload.cardID,g=t.payload.categoryID,f=Object.assign({},e);return f[g].removeCard(p),f;default:return e}},container:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return[].concat(Object(p.a)(e),[t.payload.cardID]);case _:return Object(p.a)(e).filter(function(e){return e!==t.payload.cardID});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object.assign({},e,{showingDescription:t.payload.cardID});case m:return Object.assign({},e,{showingDescription:void 0});case E:return Object.assign({},e,{changeTitle:t.payload.categoryID});case I:return Object.assign({},e,{changeTitle:void 0});case O:return Object.assign({},e,{studyID:t.payload.studyID});case b:return Object.assign({},e,{sendingSort:t.payload.status});default:return e}}}),M={cards:{status:void 0},container:[],categories:{},ui:{changeTitle:void 0,showingDescription:void 0,studyID:void 0,sendingSort:void 0}};var V=n(210),W=n(208),z=n(211),J=(n(222),n(35)),U=n(209),X=n.n(U),K="card-drag";var Q=Object(J.DragSource)(K,{beginDrag:function(e){return{id:e.id,position:e.position}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(function(e){e.id;var t=e.title,n=e.description,r=e.minimized,o=(e.position,e.onClick),i=e.showDescription,c=e.connectDragSource,u=(e.isDragging,r?"card minimized":"card");return c(a.a.createElement("li",{className:u},a.a.createElement("h4",null,t),!r&&a.a.createElement("p",null,n),r&&a.a.createElement("div",{className:"desc-container"},a.a.createElement("button",{onClick:o,className:"desc-btn"},"?"),i&&a.a.createElement("div",{className:"desc-pop"},a.a.createElement("p",null,n)))))}),$=function(e){var t=e.cards;return a.a.createElement("ul",{id:"container"},t.map(function(e){return a.a.createElement(Q,{key:e.id,id:e.id,title:e.title,description:e.description,position:-1})}))};function q(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;t.push(H[c])}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return{cards:t}}var Z=Object(c.b)(function(e){return q(e.container)},function(e){return{}})($);var ee=Object(J.DropTarget)(K,{drop:function(e,t){var n=t.getItem();e.onCardDrop(n.id,n.position,e.id)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t=e.id,n=e.title,r=e.cards,o=e.onClick,i=e.showTitleBox,c=(e.onCardDrop,e.onTitleClick),u=e.onTitleChange,l=e.onTitleFinish,s=e.descriptionID,d=e.connectDropTarget;e.isOver;return r=q(r).cards,d(a.a.createElement("li",{className:"category"},i&&a.a.createElement("input",{type:"text",defaultValue:n,onChange:function(e){return u(e,t)},onKeyPress:function(e){return l(e)},onClick:function(e){return e.stopPropagation()}}),!i&&a.a.createElement("h3",{onClick:function(e){return c(e,t)}},n),a.a.createElement("ul",null,r.map(function(e){return a.a.createElement(Q,{key:e.id,id:e.id,title:e.title,description:e.description,minimized:!0,position:t,onClick:function(t){return o(t,e.id)},showDescription:e.id===s})}))))});var te=Object(J.DropTarget)(K,{drop:function(e,t){if(!t.didDrop()){var n=t.getItem();e.onDrop(n.id,n.position)}e.removeEmptyCategories(e.categories)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t=e.categories,n=e.onClick,r=e.onCardClick,o=e.onCategTitleClick,i=e.changeTitleID,c=e.onCardDrop,u=(e.onDrop,e.descriptionID),l=e.onCategTitleChange,s=e.onCategTitleFinish,d=(e.removeEmptyCategories,e.connectDropTarget);e.isOver;return t=t.map(function(e){return a.a.createElement(ee,{key:"k"+e.id,id:e.id,title:e.title,cards:e.cards,onClick:r,onTitleChange:l,onTitleClick:o,onCardDrop:c,onTitleFinish:s,showTitleBox:e.id===i,descriptionID:u})}),d(a.a.createElement("ul",{id:"board",onClick:n},t))});function ne(e,t,n){-1===t?e(function(e){return{type:_,payload:{cardID:e},error:!1}}(n)):t>-1&&e(function(e,t){return{type:w,payload:{cardID:e,categoryID:t},error:!1}}(n,t))}var re=Object(c.b)(function(e){return{categories:Object.values(e.categories),descriptionID:e.ui.showingDescription,changeTitleID:e.ui.changeTitle}},function(e){return{onClick:function(){e({type:m,error:!1}),e(T())},onDrop:function(t,n){ne(e,n,t),e(function(e,t,n){return{type:P,payload:{categoryID:e,title:t,cardID:n},error:!1}}(void 0,"Click here to rename",t))},removeEmptyCategories:function(t){!function(e,t){for(var n in t)if(t[n].cards.length<1){e((r=t[n].id,{type:x,payload:{categoryID:r}}));break}var r}(e,t)},onCategTitleClick:function(t,n){t.stopPropagation(),e(function(e){return{type:E,payload:{categoryID:e},error:!1}}(n))},onCategTitleChange:function(t,n){var r=t.target.value;r=(r=r.replace(/\s\s+/g," ").trim()).length>0?r:"Click here to rename",e(function(e,t){return{type:F,payload:{categoryID:e,title:t},error:!1}}(n,r))},onCategTitleFinish:function(t){t.stopPropagation(),13===t.charCode&&e(T())},onCardClick:function(t,n){t.stopPropagation(),e(function(e){return{type:C,payload:{cardID:e},error:!1}}(n))},onCardDrop:function(t,n,r){ne(e,n,t),e(function(e,t){return{type:j,payload:{cardID:e,categoryID:t},error:!1}}(t,r))}}})(te),ae=function(e){var t=e.studyID,n=e.container,r=e.categories,o=e.onFinishClick;return a.a.createElement("header",null,a.a.createElement("h1",{id:"logo"},"Card Sorter"),a.a.createElement("button",{onClick:function(){return o(t,n,r)}},"Finish"))},oe=Object(c.b)(function(e){return{studyID:e.ui.studyID,container:e.container,categories:e.categories}},function(e){return{onFinishClick:function(t,n,r){e(function(e,t,n){return function(r){r(k(v)),fetch(h+"/sort_endpoint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studyID:e,categories:n,container:t})}).then(function(){return r(k(D))})}}(t,n,r))}}})(ae),ie=(n(550),function(e){function t(){return Object(G.a)(this,t),Object(V.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return a.a.createElement(J.DragDropContextProvider,{backend:X.a},a.a.createElement("div",{className:"App"},a.a.createElement(oe,null),a.a.createElement("div",{id:"main-panel"},a.a.createElement(Z,null),a.a.createElement(re,null))))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=function(){var e=Object(u.createStore)(L,M,Object(u.applyMiddleware)(l.a,d.a)),t=e.subscribe(function(){});return e.dispatch(N(1)),t(),e}();i.a.render(a.a.createElement(c.a,{store:ce},a.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[212,1,2]]]);
//# sourceMappingURL=main.5f7de440.chunk.js.map