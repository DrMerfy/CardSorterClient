(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a.p+"static/media/sample-user.efe01b90.svg"},29:function(e,t,a){e.exports=a.p+"static/media/plus.648c7e93.svg"},30:function(e,t,a){e.exports=a.p+"static/media/success.a0af0ddb.svg"},32:function(e,t,a){e.exports=a.p+"static/media/empty.cfb49f55.svg"},33:function(e,t,a){e.exports=a.p+"static/media/share.733ab684.svg"},36:function(e,t,a){e.exports=a(52)},45:function(e,t,a){},46:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),i=a.n(c),s=a(21),o=a(12),l=a(4),u=(a(45),a(46),a(11)),d=a.n(u),m="PRODUCTION",p="PRODUCTION"===m?"http://83.212.97.237:8090":"http://127.0.0.1:5000",h=a(8),g=a(9),y=function(){function e(){Object(h.a)(this,e)}return Object(g.a)(e,[{key:"getToken",value:function(){return this.getCookie("auth_token")}}]),e}();y.prototype.getCookie=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""};var E=new y,f="IS_FETCHING",v="SUCCESS",N="SHOW_PROFILE_SETTINGS",C="REQUEST_USERNAME",b="LOGOUT";function x(e,t,a){return{type:C,payload:{status:e,username:t},error:!1}}var w=a(28),O=a.n(w),k={abandonded:"Abandoned",active:"Active",add:"add",addCard:"Add Card",april:"april",august:"august",averageSort:"average sort",basicInformation:"Basic Information",card:"card",cardName:"Card name",cards:"cards",cardsNo:"cards no",cardsSorted:"cards sorted",categories:"categories",categoriesCreated:"categories created",categoriesNo:"categoriesNo",category:"category",clusters:"clusters",completed:"Completed",completedTheStudy:"completed the study",completion:"completion",couldBeMergedInto:"could be merged into",create:"Create",createStudy:"Create a new study",december:"december",description:"Description",editedOn:"Last edited on",endedOn:"Ended on",february:"february",fillMeOut:"fill me out",filter:"FILTER",frequency:"frequency",inactive:"Inactive",january:"january",july:"july",june:"june",launchedOn:"Launched on",march:"march",may:"may",message:"Message",noParticipantsYet:"no participants yet",november:"november",october:"october",of:"of",ofTheParticipants:"of the participants.",ongoing:"ongoing",outOf:"out of",participant:"participant",participantNo:"participant no",participants:"participants",september:"september",shareThisUrlWithTheParticipants:"Share this url with the participants",sharingGraph:"Sharing graph",similarity:"similarity",similarityMatrix:"similarity matrix",studies:"STUDIES",studyCreated:"Study created",thanksMessage:"Thanks message",timeTaken:"time taken",title:"Title",toFront:"to Front",users:"users",wasGroupedTogetherBy:"was grouped together by ",wereSorterInAverage:"were sorter in average"},D=new(function(){function e(){Object(h.a)(this,e)}return Object(g.a)(e,[{key:"initialize",value:function(e){this.text=k}}]),e}()),T=function(e){var t=e.username,a=(e.profilePic,e.showBackButton),n=e.profileUnfold,c=e.onProfileClick,i=e.onLogoutClick,s=n?"profile unfold":"profile";return r.a.createElement("header",null,r.a.createElement("a",{className:"logo-container",href:"/"},r.a.createElement("p",{id:"logo"},"Card Sorter"),a&&r.a.createElement("button",{id:"back"},r.a.createElement("span",{className:"arrow"},r.a.createElement("span",{className:"shaft"})),r.a.createElement("span",{className:"content"},D.text.toFront))),r.a.createElement("div",{className:s,onClick:function(){return c(n)}},r.a.createElement("div",{className:"header"},r.a.createElement("p",null,t),r.a.createElement("img",{src:O.a,alt:"Profile"})),n&&r.a.createElement("div",{className:"content"},r.a.createElement("button",{className:"unfunctional"},"Settings"),r.a.createElement("button",{onClick:i},"Log out"))))},j=Object(l.b)(function(e,t){return{username:e.header.username,profilePic:e.header.profilePic,profileUnfold:e.header.profileUnfold,showBackButton:t.showBackButton}},function(e){return{onProfileClick:function(t){e({type:N,payload:{toggle:!t},error:!1})},onLogoutClick:function(){e({type:b,payload:{},error:!1})}}})(T);function S(e){switch(e){case 0:return D.text.january;case 1:return D.text.february;case 2:return D.text.march;case 3:return D.text.april;case 4:return D.text.may;case 5:return D.text.june;case 6:return D.text.july;case 7:return D.text.august;case 8:return D.text.september;case 9:return D.text.october;case 10:return D.text.november;default:return D.text.december}}var _=function(e){var t=e.title,a=e.isLive,n=e.completedNo,c=e.abandonedNo,i=e.launchedDate,s=e.editDate,o=e.endDate,l=e.onClick;return r.a.createElement("li",{className:"studyItem",onClick:l},r.a.createElement("div",{className:"header"},r.a.createElement("h3",null,t),a&&r.a.createElement("span",{className:"activeSquare isLive"}),!a&&r.a.createElement("span",{className:"activeSquare notLive"})),r.a.createElement("div",{className:"participants"},r.a.createElement("p",{className:"completed"},n," ",D.text.completed),r.a.createElement("p",{className:"abandoned"},c," ",D.text.abandonded)),r.a.createElement("div",{className:"dates"},r.a.createElement("p",{className:"launched"},D.text.launchedOn," ",r.a.createElement("time",{dateTime:i},i.getDate(),r.a.createElement("span",{className:"capitalize"},r.a.createElement(r.a.Fragment,null," "),S(i.getMonth())),r.a.createElement(r.a.Fragment,null," "),i.getFullYear())),!o&&r.a.createElement("p",{className:"edited"},D.text.editedOn," ",r.a.createElement("time",{dateTime:s},s.getDate(),r.a.createElement("span",{className:"capitalize"},r.a.createElement(r.a.Fragment,null," "),S(s.getMonth())),r.a.createElement(r.a.Fragment,null," "),s.getFullYear())),o&&r.a.createElement("p",{className:"ended"},D.text.endedOn," ",r.a.createElement("time",{dateTime:o},o.getDate(),r.a.createElement("span",{className:"capitalize"},r.a.createElement(r.a.Fragment,null," "),S(o.getMonth())),r.a.createElement(r.a.Fragment,null," "),o.getFullYear()))))},A=a(29),P=a.n(A),M=function(e){var t=e.onClick;return r.a.createElement("button",{className:"createStudyCard",onClick:t},r.a.createElement("img",{src:P.a,alt:"Plus sign"}),r.a.createElement("p",null,"Create a study"))},I=function(e){var t=e.studies,a=e.onStudyClick,n=e.onCreateClick;return r.a.createElement("ul",{className:"studies-container"},t.map(function(e,t){return r.a.createElement(_,{key:"studyItem"+t,title:e.title,isLive:e.isLive,completedNo:e.completedNo,abandonedNo:e.abandonedNo,launchedDate:e.launchedDate,editDate:e.editDate,endDate:e.endDate,onClick:function(){return a(e.id)}})}),r.a.createElement(M,{onClick:n}))},R=Object(l.b)(function(e,t){return{studies:e.studies.studies,onStudyClick:function(e){t.history.push("./study/"+e)},onCreateClick:function(){t.history.push("./create")}}},function(e){return{}})(I),L=function(e){var t="",a="";return e.ongoing&&(t="active"),e.completed&&(a="active"),r.a.createElement("div",{className:"filter-container"},r.a.createElement("p",null,D.text.filter),r.a.createElement("a",{className:t},D.text.ongoing),r.a.createElement("a",{className:a},D.text.completed))},U=function(e){var t=e.history;return r.a.createElement("main",null,r.a.createElement(j,{showBackButton:!1}),r.a.createElement(L,{ongoing:!0,completed:!0}),r.a.createElement(R,{history:t}))},G=function(e){var t=e.values,a=e.errors,n=e.dispatch;return r.a.createElement("div",{className:"study-creation-card"},r.a.createElement("h1",null,D.text.createStudy),r.a.createElement("h2",null,D.text.basicInformation),r.a.createElement("form",null,r.a.createElement("div",{className:"error-holder"},r.a.createElement("input",{type:"text",placeholder:D.text.title,defaultValue:t.title,onChange:function(e){return n.onChange("title",e)}}),a.title&&r.a.createElement("div",{className:"error-message"},r.a.createElement("p",null,D.text.fillMeOut))),r.a.createElement("div",{className:"error-holder"},r.a.createElement("textarea",{placeholder:D.text.description,defaultValue:t.description,rows:"10",cols:"30",onChange:function(e){return n.onChange("description",e)}}),a.description&&r.a.createElement("div",{className:"error-message"},r.a.createElement("p",null,D.text.fillMeOut)))),r.a.createElement("div",{className:"bottom-container"},r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"prev disabled",onClick:n.onPrev}),r.a.createElement("button",{className:"next",onClick:function(){return n.onNext(t.title,t.description)}})),r.a.createElement("div",{className:"page-no-container"},r.a.createElement("p",null,"1"),r.a.createElement("p",null,D.text.of),r.a.createElement("p",null,"3"))))},F=function(e){var t=e.name,a=e.description,n=e.onNameChange,c=e.onDescriptionChange,i=e.onDelete;return r.a.createElement("div",{className:"card"},r.a.createElement("input",{type:"text",placeholder:D.text.cardName,defaultValue:t,onChange:function(e){return n(e)}}),r.a.createElement("input",{type:"text",placeholder:D.text.description,defaultValue:a,onChange:function(e){return c(e)}}),r.a.createElement("button",{type:"button",onClick:i}))},V=function(e){var t=e.values,a=e.errors,c=e.dispatch,i=Object(n.useRef)(10);return r.a.createElement("div",{className:"study-creation-card"},r.a.createElement("h1",null,D.text.createStudy),r.a.createElement("h2",null,D.text.cards),r.a.createElement("form",{className:"cards"},r.a.createElement("div",{className:"error-holder"},r.a.createElement("div",{className:"card-container"},t.cards.map(function(e){return r.a.createElement(F,{key:"card"+e.id,name:e.name,description:e.description,onNameChange:function(t){return c.onCardNameChange(e.id,t)},onDescriptionChange:function(t){return c.onCardDescriptionChange(e.id,t)},onDelete:function(){return c.onDeleteCard(e.id)}})})),a.cards&&r.a.createElement("div",{className:"error-message"},r.a.createElement("p",null,D.text.fillMeOut))),r.a.createElement("div",{className:"add-buttons-container"},r.a.createElement("div",{className:"multi-add-container"},r.a.createElement("p",null,D.text.add),r.a.createElement("input",{defaultValue:"10",ref:i}),r.a.createElement("p",null,D.text.cards),r.a.createElement("button",{className:"btn-secondary",type:"button",onClick:function(){return c.onCreateXCards(i)}},r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26"},r.a.createElement("path",{d:"m.3,14c-0.2-0.2-0.3-0.5-0.3-0.7s0.1-0.5 0.3-0.7l1.4-1.4c0.4-0.4 1-0.4 1.4,0l.1,.1 5.5,5.9c0.2,0.2 0.5,0.2 0.7,0l13.4-13.9h0.1v-8.88178e-16c0.4-0.4 1-0.4 1.4,0l1.4,1.4c0.4,0.4 0.4,1 0,1.4l0,0-16,16.6c-0.2,0.2-0.4,0.3-0.7,0.3-0.3,0-0.5-0.1-0.7-0.3l-7.8-8.4-.2-.3z"})))),r.a.createElement("button",{type:"button",className:"btn-primary",onClick:c.onCreateCard},r.a.createElement("span",{id:"plus-icon"}),r.a.createElement("p",null,D.text.addCard)))),r.a.createElement("div",{className:"bottom-container"},r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"prev",onClick:c.onPrev}),r.a.createElement("button",{className:"next",onClick:function(){return c.onNext(t.cards)}})),r.a.createElement("div",{className:"page-no-container"},r.a.createElement("p",null,"2"),r.a.createElement("p",null,D.text.of),r.a.createElement("p",null,"3"))))},B=function(e){var t=e.values,a=e.errors,n=e.dispatch;return r.a.createElement("div",{className:"study-creation-card"},r.a.createElement("h1",null,D.text.createStudy),r.a.createElement("h2",null,D.text.message),r.a.createElement("form",null,r.a.createElement("div",{className:"error-holder"},r.a.createElement("textarea",{className:"thanks message",cols:"30",rows:"10",onChange:function(e){return n.onMessageChange(e)},placeholder:D.text.thanksMessage,defaultValue:t.message}),a.message&&r.a.createElement("div",{className:"error-message"},r.a.createElement("p",null,D.text.fillMeOut)))),r.a.createElement("div",{className:"bottom-container"},r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"prev",onClick:n.onPrev}),r.a.createElement("button",{className:"create",onClick:function(){return n.onNext(t.study)}},D.text.create)),r.a.createElement("div",{className:"page-no-container"},r.a.createElement("p",null,"3"),r.a.createElement("p",null,D.text.of),r.a.createElement("p",null,"3"))))},H=a(30),z=a.n(H),q=function(e){var t=e.values,a=e.dispatch,c=Object(n.useRef)(null);return r.a.createElement("div",{className:"success-page"},r.a.createElement("h1",null,D.text.studyCreated),r.a.createElement("img",{src:z.a,alt:"Welcome to your new study!"}),r.a.createElement("div",{className:"actions-container"},r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:a.onButtonClick},"Go to study")),r.a.createElement("div",{className:"share-container"},r.a.createElement("div",{className:"url-container"},r.a.createElement("textarea",{className:"url",ref:c,defaultValue:t.share_url}),r.a.createElement("button",{className:"copy",type:"button",onClick:function(){return a.onCopy(c)}})),r.a.createElement("p",null,"Share this url with the participants"))))},Y=function(e){var t,a=e.currentPage,n=e.page1Values,c=e.page1Errors,i=e.page1Dispatch,s=e.page2Values,l=e.page2Errors,u=e.page2Dispatch,d=e.page3Values,m=e.page3Errors,p=e.page3Dispatch,h=e.page4Values,g=e.page4Dispatch;return 1===a?t=r.a.createElement(G,{values:n,errors:c,dispatch:i}):2===a?t=r.a.createElement(V,{values:s,errors:l,dispatch:u}):3===a?t=r.a.createElement(B,{values:d,errors:m,dispatch:p}):4===a?t=r.a.createElement(q,{values:h,dispatch:g}):-1===a&&(t=r.a.createElement(o.a,{to:"/"})),t};function W(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log(t)}var J="LOAD_STUDIES",X="ADD_STUDY";function K(e,t,a){return{type:J,payload:{status:e,studies:t},error:a}}var Q="CHANGE_TITLE",$="CHANGE_DESCRIPTION",Z="ADD_CARD",ee="ADD_X_CARDS",te="DELETE_CARD",ae="CHANGE_CARD_NAME",ne="CHANGE_CARD_DESCRIPTION",re="CHANGE_THANKS_MESSAGE",ce="CREATE_STUDY",ie="SHOW_PAGE",se="OPEN_STUDY_PAGE",oe="TOGGLE_TITLE_ERROR",le="TOGGLE_DESCRIPTION_ERROR",ue="TOGGLE_CARD_ERROR",de="TOGGLE_THANKS_ERROR";function me(e){return{type:ie,payload:{pageNo:e},error:!1}}function pe(e){return{type:oe,payload:{status:e},error:!1}}function he(e){return{type:le,payload:{status:e},error:!1}}function ge(e){return{type:ue,payload:{status:e},error:!1}}function ye(e){return{type:de,payload:{status:e},error:!1}}function Ee(e,t,a){return{type:ce,payload:{status:e,study:t,error:a}}}function fe(e){return function(t){t(Ee(f)),fetch(p+"/studies_endpoint",{method:"POST",withCredentials:!0,credentials:"include",headers:{"Content-Type":"application/json",Authorization:E.getToken(),"Access-Control-Allow-Credentials":!0},body:JSON.stringify(e)}).then(function(e){return e.json().then(function(a){var n;401===e.status?(setTimeout(window.location.reload(!0),1e3),window.location.replace(a.location)):(t((n=a.study,{type:X,payload:{study:n},error:!1})),t(Ee(v,a.study)))})})}}function ve(e,t,a){try{var n=a.target.value;switch(t){case"title":e(pe(!1)),e({type:Q,payload:{title:n},error:!1});break;case"description":e(he(!1)),e({type:$,payload:{description:n},error:!1})}}catch(r){return}}function Ne(e){return{title:e.title,description:e.description,cards:e.cards,message:e.thanksMessage}}var Ce=Object(l.b)(function(e){return{currentPage:e.studyCreation.ui.currentPage,page1Values:{title:e.studyCreation.title,description:e.studyCreation.description},page1Errors:{title:e.studyCreation.errorTitle,description:e.studyCreation.errorDescription},page2Values:{cards:Object.values(e.studyCreation.cards)},page2Errors:{cards:e.studyCreation.errorCards},page3Values:{message:e.studyCreation.thanksMessage,study:Ne(e.studyCreation)},page3Errors:{message:e.studyCreation.errorMessage},page4Values:{share_url:e.studyCreation.share_url}}},function(e,t){return{page1Dispatch:{onChange:function(t,a){ve(e,t,a)},onNext:function(t,a){return t&&0!==t.length?a&&0!==a.length?void e(me(2)):(e(he(!0)),void setTimeout(function(){return he(!1)},5e3)):(e(pe(!0)),void setTimeout(function(){return pe(!1)},5e3))},onPrev:function(){}},page2Dispatch:{onCreateCard:function(){var t;e((t=Date.now(),{type:Z,payload:{id:t},error:!1}))},onCreateXCards:function(t){var a;e((a=parseInt(t.current.value),{type:ee,payload:{no:a},error:!1}))},onCardNameChange:function(t,a){e(ge(!1));var n=a.target.value;e(function(e,t){return{type:ae,payload:{id:e,name:t},error:!1}}(t,n))},onCardDescriptionChange:function(t,a){var n=a.target.value;e(function(e,t){return{type:ne,payload:{id:e,description:t},error:!1}}(t,n))},onDeleteCard:function(t){e(function(e){return{type:te,payload:{id:e},error:!1}}(t))},onNext:function(t){if(!t||!t[0].name||0===t[0].name.length)return e(ge(!0)),void setTimeout(function(){return ge(!1)},5e3);e(me(3))},onPrev:function(){e(me(1))}},page3Dispatch:{onMessageChange:function(t){e(ye(!1));var a=t.target.value;e(function(e){return{type:re,payload:{message:e},error:!1}}(a))},onNext:function(t){if(!t.message||0===t.message.length)return e(ye(!0)),void setTimeout(function(){return ye(!1)},5e3);e(fe(t))},onPrev:function(){e(me(2))}},page4Dispatch:{onCopy:function(e){e.current.select(),document.execCommand("copy")},onButtonClick:function(){e({type:se,payload:{},error:!1})}}}})(Y),be=function(e){var t=e.history;return r.a.createElement("main",null,r.a.createElement(j,{showBackButton:!0}),r.a.createElement(Ce,{history:t}))},xe=Object(l.b)(function(e,t){return{history:t.history}},function(e){return{}})(be),we=a(18),Oe=a(17),ke=a(19),De=a(2),Te=a.n(De),je=function(e){for(var t=e.selectedNo,a=e.onClicks,n=[],c=0;c<5;c++)n[c]="";return n[t]="selected",r.a.createElement("div",{className:"study-menu"},r.a.createElement("button",{onClick:a.participant,className:n[0]},D.text.participant),r.a.createElement("button",{onClick:a.cards,className:n[1]},D.text.cards),r.a.createElement("button",{onClick:a.categories,className:n[2]},D.text.categories),r.a.createElement("button",{onClick:a.similarityMatrix,className:n[3]},D.text.similarityMatrix),r.a.createElement("button",{onClick:a.clusters,className:n[4]},D.text.clusters))};je.propsTypes={selectedNo:Te.a.number.isRequired,onClick:Te.a.object.isRequired};var Se=je,_e=function(e){var t=e.headers,a=e.data;return r.a.createElement("div",{className:"data-container"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,t.map(function(e){return r.a.createElement("th",{key:"header"+e},e)}))),r.a.createElement("tbody",null,a.map(function(e,t){return r.a.createElement("tr",{key:"line"+t},e.map(function(e,t){return e instanceof Array?r.a.createElement("td",{key:"item"+t},r.a.createElement("ul",null,e.map(function(e,t){return r.a.createElement("li",{key:"child"+t},e)}))):r.a.createElement("td",{key:"item"+t},e)}))}))))},Ae=function(e){var t=e.percentage,a=e.sub,n=e.total,c=e.entity,i=e.title,s=e.action;return r.a.createElement("div",{className:"bar-graph-container"},r.a.createElement("p",null,i),r.a.createElement("div",{className:"graphic"},r.a.createElement("div",{className:"completion",style:{height:t}}),r.a.createElement("div",{className:"index",style:{bottom:t}},r.a.createElement("p",null,t))),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,r.a.createElement("span",{className:"emphasized"},a)," ",D.text.outOf," ",r.a.createElement("span",{className:"emphasized"},n)," ",c),r.a.createElement("p",null,s)))},Pe=a(32),Me=a.n(Pe),Ie=function(e){var t=e.shareUrl,a=e.copyUrl,c=Object(n.useRef)(null);return r.a.createElement("div",{className:"no-participants-page"},r.a.createElement("h1",null,D.text.noParticipantsYet),r.a.createElement("img",{src:Me.a,alt:"Nothing found"}),r.a.createElement("div",{className:"actions-container"},r.a.createElement("div",{className:"url-container"},r.a.createElement("textarea",{className:"url",ref:c,defaultValue:t}),r.a.createElement("button",{className:"copy",type:"button",onClick:function(){return a(c)}}))))},Re=function(e){var t=e.data,a=e.selected,n=e.onHover;return r.a.createElement("div",{className:"similarirty-matrix"},r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e,c){return r.a.createElement("tr",{key:"line"+c},e.map(function(i,s){var o="color-";return i<20?o+=20:i<40?o+=40:i<60?o+=60:i<80?o+=80:i<=100&&(o+=100),s===e.length-1&&(o=a[c]?"hovered":""),r.a.createElement("td",{key:"item"+c+","+s,className:o,onMouseOver:function(){return n(c,s)},title:t[s][t[s].length-1]+" | "+e[e.length-1]+" "+D.text.wasGroupedTogetherBy+" "+i+"% "+D.text.ofTheParticipants},i)}))}))))},Le=a(20);function Ue(e,t,a){return.8*(a-a*(e/100))+.2*t}var Ge=function(e){function t(){return Object(h.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ke.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data;if(!e.fetching){var a=window.innerWidth-100,n=window.innerHeight,r=Le.c("#data").append("svg").attr("width",a).attr("height",n).append("g").attr("transform","translate(40,0)"),c=a-200,i=Le.a().size([n,c]),s=Le.b(t,function(e){return e.children});i(s),r.selectAll("path").data(s.descendants().slice(1)).enter().append("path").attr("d",function(e){return"M"+Ue(e.data.distance,e.y,c)+","+e.x+"L"+Ue(e.parent.data.distance,e.parent.y,c)+","+e.x+"L"+Ue(e.parent.data.distance,e.parent.y,c)+","+e.parent.x}).attr("stroke-width",function(e){return 1.2*e.data.hierarchy+"px"}).attr("class","link");var o=r.selectAll("node").data(s.descendants()).enter().append("g").attr("class",function(e){return"node"+(e.children?" node--internal":" node--leaf")}).attr("transform",function(e){return"translate("+e.y+","+e.x+")"});o.append("circle").attr("r",function(e){return 0===e.data.children.length?3*e.data.hierarchy:0}),o.append("text").attr("dy",3).attr("x",-8).style("text-anchor","end").style("transform","scaleX(-1)").text(function(e){return e.data.name})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"dendrogram"},r.a.createElement("div",{id:"aggreement-axis"},r.a.createElement("p",null,"100% aggreement"),r.a.createElement("p",null,"0%")),r.a.createElement("div",{className:"",id:"data"}))}}]),t}(n.Component),Fe=function(e){var t=e.url,a=e.text,c=e.onCopy,i=Object(n.useRef)(null);return r.a.createElement("div",{className:"share-container"},r.a.createElement("div",{className:"url-container"},r.a.createElement("textarea",{className:"url",ref:i,defaultValue:t}),r.a.createElement("button",{className:"copy",type:"button",onClick:function(){return c(i)}})),a&&r.a.createElement("p",null,a))},Ve=Object(l.b)(function(e,t){return{url:t.url,text:t.text,onCopy:function(e){e.current.select(),document.execCommand("copy")}}},function(e){return{}})(Fe);Ve.propTypes={url:Te.a.string.isRequired,text:Te.a.string};var Be=Ve,He=function(e){var t=e.title,a=e.icon,n=e.iconAlt,c=e.url,i=e.close;return r.a.createElement("div",{className:"popup-container",onClick:i},r.a.createElement("div",{className:"popup",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"header"},a&&r.a.createElement("img",{src:a,alt:n}),r.a.createElement("h2",null,t),r.a.createElement("button",{className:"close-btn",onClick:i},"\u2715")),r.a.createElement("div",{className:"content"},c&&r.a.createElement(Be,{url:c}))))},ze=a(33),qe=a.n(ze),Ye=function(e){function t(){return Object(h.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ke.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.loadStudy(),this.props.loadClusters()}},{key:"render",value:function(){var e,t=this.props,a=t.isFetching,n=t.title,c=t.isLive,i=t.launched,s=t.menuValues,o=t.menuDispatch,l=t.graphValues,u=t.tableValues,d=t.shareUrl,m=t.clustersPage,p=t.noParticipants,h=t.similarityPage,g=t.copyUrl,y=t.similarityMatrix,E=t.similarityHover,f=t.selectedCards,v=t.clusters,N=t.clustersFetching,C=t.showPopup,b=t.openPopup,x=t.closePopup;return a||void 0===a?r.a.createElement("p",null,"Loading..."):(e=p?r.a.createElement(Ie,{shareUrl:d,copyUrl:g}):r.a.createElement(r.a.Fragment,null,C&&r.a.createElement(He,{title:D.text.shareThisUrlWithTheParticipants,url:d,icon:qe.a,iconAlt:D.text.sharingGraph,close:x}),r.a.createElement(Se,{selectedNo:s.selectedNo,onClicks:o.onClicks}),m&&r.a.createElement(Ge,{data:v,fetcing:N}),h&&r.a.createElement(Re,{data:y,onHover:E,selected:f}),!(h||m)&&r.a.createElement("div",{className:"content"},r.a.createElement(Ae,{percentage:l.percentage,sub:l.sub,total:l.total,entity:l.entity,title:l.title,action:l.action}),r.a.createElement(_e,{headers:u.headers,data:u.data}))),r.a.createElement("div",{className:"study-page"},r.a.createElement("span",{className:"header"},r.a.createElement("h1",null,n),r.a.createElement("button",{className:"edit unfunctional"}),r.a.createElement("button",{className:"share",onClick:b})),r.a.createElement("span",{className:"active"},c&&r.a.createElement("div",{className:"active-container"},r.a.createElement("span",{className:"activeSquare isLive"}),r.a.createElement("p",null,D.text.active)),!c&&r.a.createElement("div",{className:"active-container"},r.a.createElement("span",{className:"activeSquare notLive"}),r.a.createElement("p",null,D.text.inactive)),r.a.createElement("h2",{className:"date"},D.text.launchedOn," ",i.getDate(),r.a.createElement("span",{className:"capitalize"},r.a.createElement(r.a.Fragment,null," "),S(i.getMonth())),r.a.createElement(r.a.Fragment,null," "),i.getFullYear())),e))}}]),t}(n.Component),We="CHANGE_VIEW",Je="LOAD_STUDY",Xe="CHANGE_HOVERED_CARDS",Ke="LOAD_CLUSTERS",Qe="TOGGLE_POPUP";function $e(e){return{type:We,payload:{no:e},error:!1}}function Ze(e){return{type:Qe,payload:{toggle:e},error:!1}}function et(e,t,a){return{type:Je,payload:{status:e,study:t},error:a}}function tt(e,t,a){return{type:Ke,payload:{status:e,clusters:t},error:a}}function at(e){switch(e.study.selectedItem){case 0:return[D.text.participantNo,D.text.timeTaken,D.text.cardsSorted,D.text.categoriesCreated];case 1:return[D.text.card,D.text.categoriesNo,D.text.categories,D.text.frequency];case 2:return[D.text.category,D.text.cardsNo,D.text.cards,D.text.frequency,D.text.participants];default:return[]}}function nt(e){switch(e.study.selectedItem){case 0:return{percentage:e.study.participants.completion,sub:e.study.participants.completed,total:e.study.participants.total,entity:D.text.users,title:D.text.completion,action:D.text.completedTheStudy};case 1:return{percentage:e.study.cards.average,sub:e.study.cards.sorted,total:e.study.cards.total,entity:D.text.cards,title:D.text.averageSort,action:D.text.wereSorterInAverage};case 2:return{percentage:e.study.categories.similarity,sub:e.study.categories.similar,total:e.study.categories.total,entity:D.text.categories,title:D.text.similarity,action:D.text.couldBeMergedInto};default:return{}}}function rt(e){switch(e.study.selectedItem){case 0:return e.study.participants.data;case 1:return e.study.cards.data;case 2:return e.study.categories.data;default:return{}}}var ct=Object(l.b)(function(e){return{isFetching:e.study.isFetching,title:e.study.title,isLive:e.study.isLive,launched:e.study.launchedDate,noParticipants:e.study.noParticipants,similarityPage:3===e.study.selectedItem,clustersPage:4===e.study.selectedItem,shareUrl:e.study.shareUrl,menuValues:{selectedNo:e.study.selectedItem},graphValues:nt(e),tableValues:{headers:at(e),data:rt(e)},similarityMatrix:e.study.similarityMatrix,selectedCards:e.study.selectedCards,clusters:e.study.clusters,clustersFetching:e.study.clustersFetching,showPopup:e.study.popupShowing}},function(e,t){return{loadStudy:function(){return e((a=t.id,function(e){e(et(f)),d()(p+"/studies_endpoint?id="+a,{method:"GET",withCredentials:!0,credentials:"include",headers:{Authorization:E.getToken(),"Access-Control-Allow-Credentials":!0}}).then(function(t){return t.json().then(function(a){401===t.status?(setTimeout(window.location.reload(!0),1e3),window.location.replace(a.location)):e(et(v,a.study))})})}));var a},loadClusters:function(){return e((a=t.id,function(e){e(tt(f)),d()(p+"/studies_endpoint?id="+a+"&clusters="+!0,{method:"GET",withCredentials:!0,credentials:"include",headers:{Authorization:E.getToken(),"Access-Control-Allow-Credentials":!0}}).then(function(t){return t.json().then(function(a){401===t.status?(setTimeout(window.location.reload(!0),1e3),window.location.replace(a.location)):e(tt(v,a.clusters))})})}));var a},menuDispatch:{onClicks:{participant:function(){e($e(0))},cards:function(){e($e(1))},categories:function(){e($e(2))},similarityMatrix:function(){e($e(3))},clusters:function(){e($e(4))}}},tableDispatch:{},similarityHover:function(t,a){e({type:Xe,payload:{index1:t,index2:a},error:!1})},copyUrl:function(e){e.current.select(),document.execCommand("copy")},openPopup:function(){e(Ze(!0))},closePopup:function(){e(Ze(!1))}}})(Ye),it=function(e){e.history;var t=e.match;return r.a.createElement("main",null,r.a.createElement(j,{showBackButton:!0}),r.a.createElement(ct,{id:t.params.id}))},st=a(10),ot=a(34),lt=a(35),ut=a.n(lt);var dt=function e(t,a,n,r,c,i,s,o){Object(h.a)(this,e),this.id=t,this.title=a,this.isLive=n,this.completedNo=r,this.abandonedNo=c,this.launchedDate=i,this.editDate=s,this.endDate=o};var mt=Object(st.c)({header:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object.assign({},e,{profileUnfold:t.payload.toggle});case b:return document.cookie="auth_token= ;expires = Thu, 01 Jan 1970 00:00:00 GMT",document.location.replace("/"),e;case C:return Object.assign({},e,{username:t.payload.status===v?t.payload.username:""});default:return e}},studies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:var a=Object.assign({},e);return t.payload.status===v&&(t.payload.studies&&0!==t.payload.studies.length?a.studies=t.payload.studies.map(function(e){var t=e.id,a=e.title,n=e.isLive,r=e.completedNo,c=e.abandonedNo,i=e.launchedDate,s=e.editDate,o=e.endDate;return new dt(t,a,n,r,c,new Date(i),new Date(s),n?void 0:new Date(o))}):a.studies=[]),a.isFetching=t.payload.status!==v,a.studies.sort(function(e,t){return t.editDate-e.editDate}),a;case X:var n=Object.assign({},e),r=t.payload.study;return n.studies.push(new dt(r.id,r.title,r.isLive,r.completedNo,r.abandonedNo,new Date(r.launchedDate),new Date(r.editDate),void 0)),n;default:return e}},studyCreation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object.assign({},e,{title:t.payload.title});case $:return Object.assign({},e,{description:t.payload.description});case Z:var a=Object.assign({},e);return a.cards[t.payload.id]={id:t.payload.id,name:void 0,description:void 0},a;case ee:for(var n=Object.assign({},e),r=Date.now(),c=0;c<t.payload.no;c++)n.cards[r+c]={id:r+c,name:"A very large title title tile",description:void 0};return n;case te:var i=Object.assign({},e);return delete i.cards[t.payload.id],i;case ae:var s=Object.assign({},e);return s.cards[t.payload.id].name=t.payload.name,s;case ne:var o=Object.assign({},e);return o.cards[t.payload.id].description=t.payload.description,o;case re:return Object.assign({},e,{thanksMessage:t.payload.message});case oe:return Object.assign({},e,{errorTitle:t.payload.status});case le:return Object.assign({},e,{errorDescription:t.payload.status});case ue:return Object.assign({},e,{errorCards:t.payload.status});case de:return Object.assign({},e,{errorMessage:t.payload.status});case ie:var l=Object.assign({},e);return l.ui.currentPage=t.payload.pageNo,l;case se:return window.location.assign(e.url_to_study),e;case ce:var u=Object.assign({},e);return t.payload.status===v&&(u.url_to_study=t.payload.study.url_to_study,u.share_url=t.payload.study.share_url,u.ui.currentPage=4),u.ui.studySending=t.payload.status,u;default:return e}},study:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:var a=Object.assign({},e),n=t.payload.study;return t.payload.status===v&&(a.id=n.id,a.title=n.title,a.isLive=n.isLive,a.launchedDate=new Date(n.launchedDate),a.ended=n.ended?new Date(n.ended):void 0,a.noParticipants=0===n.participants,a.shareUrl=n.shareUrl,a.participants={completion:n.participants?n.participants.completion:"0%",total:n.participants?n.participants.total:0,completed:n.participants?n.participants.completed:0,data:n.participants?n.participants.data:[]},a.cards={average:n.cards?n.cards.average:"0%",total:n.cards?n.cards.total:0,sorted:n.cards?n.cards.sorted:0,data:n.cards?n.cards.data:[]},a.categories={similarity:n.categories?n.categories.similarity:"0%",total:n.categories?n.categories.total:0,similar:n.categories?n.categories.similar:0,merged:n.categories?n.categories.merged:0,data:n.categories?n.categories.data:[]},a.similarityMatrix=n.similarityMatrix),a.isFetching=t.payload.status!==v,a;case Ke:var r={};return t.payload.status===v&&(r=t.payload.clusters),Object.assign({},e,{clusters:r,clustersFetching:t.payload.status!==v});case We:return Object.assign({},e,{selectedItem:t.payload.no});case Xe:for(var c=[],i=0;i<e.similarityMatrix.length;i++)c.push(i===t.payload.index1||i===t.payload.index2);return Object.assign({},e,{selectedCards:c});case Qe:return Object.assign({},e,{popupShowing:t.payload.toggle});default:return e}}}),pt={header:{username:void 0,profilePic:"../icons/sample-user.svg",profileUnfold:!1},studies:{isFetching:void 0,didInvalidate:void 0,studies:[]},studyCreation:{title:void 0,description:void 0,url_to_study:void 0,share_url:void 0,errorTitle:!1,errorDescription:!1,errorCards:!1,errorMessage:!1,cards:{1:{id:1,name:void 0,description:void 0}},thanksMessage:void 0,ui:{currentPage:1,titleFetching:void 0,validTitle:!0,studySending:void 0}},study:{isFetching:void 0,id:void 0,title:void 0,isLive:void 0,launchedDate:void 0,ended:void 0,selectedItem:0,noParticipants:!0,shareUrl:void 0,popupShowing:!1,participants:{completion:void 0,total:void 0,completed:void 0,data:[]},cards:{average:void 0,total:void 0,sorted:void 0,data:[]},categories:{similarity:void 0,total:void 0,similar:void 0,merged:void 0,data:[]},similarityMatrix:void 0,selectedCards:[],clusters:{},clustersFetching:void 0}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ht=function(){var e=[ot.a];"PRODUCTION"!==m&&e.push(ut.a);var t=Object(st.d)(mt,pt,st.a.apply(void 0,e));D.initialize("en-us");var a=t.subscribe(function(){});return t.dispatch(function(e){e(x(f)),d()(p+"/studies_endpoint?username=true",{method:"GET",withCredentials:!0,credentials:"include",headers:{Authorization:E.getToken(),"Access-Control-Allow-Credentials":!0}}).then(function(t){return t.json().then(function(a){401!==t.status&&e(x(v,a.username))})})}),t.dispatch(function(e){e(K(f)),d()(p+"/studies_endpoint",{method:"GET",withCredentials:!0,credentials:"include",headers:{Authorization:E.getToken(),"Access-Control-Allow-Credentials":!0}}).then(function(t){t.json().then(function(a){401===t.status?(setTimeout(window.location.reload(!0),1e3),window.location.replace(a.location)):e(K(v,a.studies))},function(e){return W("Error on decoding json: ",e)})},function(e){return W(e)})}),a(),t}();i.a.render(r.a.createElement(l.a,{store:ht},r.a.createElement(s.a,null,r.a.createElement(o.b,{exact:!0,path:"/",component:U}),r.a.createElement(o.b,{path:"/create",component:xe}),r.a.createElement(o.b,{path:"".concat("","/study/:id"),component:it}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.ff2f07e7.chunk.js.map